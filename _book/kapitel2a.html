<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>3&nbsp; Relative Portfoliooptimierung – Grundlagen des quantitativen Portfoliomanagements mit Python</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2" crossorigin="anonymous"></script><script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./kapitel3a.html" rel="next">
<link href="./kapitel1a.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-707d8167ce6003fca903bfe2be84ab7f.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-e0fdce12ac1367d4b47c179a2935dd10.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark-74c88ba48ad0bebf983f0ffd06dd1671.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="site_libs/bootstrap/bootstrap-e0fdce12ac1367d4b47c179a2935dd10.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>
<script src="https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js" integrity="sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar floating quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const darkModeDefault = authorPrefersDark;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./kapitel2a.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Relative Portfoliooptimierung</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="./index.html" class="sidebar-logo-link">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Grundlagen des quantitativen Portfoliomanagements mit Python</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Willkommen zu „Grundlagen des quantitativen Portfoliomanagements mit Python“</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./kapitel1a.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Grundlagen der klassischen (absoluten) Portfoliooptimierung</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./kapitel2a.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Relative Portfoliooptimierung</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./kapitel3a.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Schätzrisiken in der Portfoliotheorie</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./kapitel4a.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Verbesserte Schätzung der Inputparameter: Geschrumpfte Schätzer</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./kapitel5a.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Das Black-Litterman Modell</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./kapitel6a.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Berücksichtigung des Schätzrisikos: Portfolio-Resampling</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./kapitel7a.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Risikogesteuerte Ansätze: Verzicht auf die Schätzung der erwarteten Rendite</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./kapitel8a.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Index Tracking</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./projekt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Abschlußprojekt</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#motivation" id="toc-motivation" class="nav-link active" data-scroll-target="#motivation"><span class="header-section-number">3.1</span> Motivation</a></li>
  <li><a href="#grundlagen-und-grundbegriffe-der-relativen-optimierung" id="toc-grundlagen-und-grundbegriffe-der-relativen-optimierung" class="nav-link" data-scroll-target="#grundlagen-und-grundbegriffe-der-relativen-optimierung"><span class="header-section-number">3.2</span> Grundlagen und Grundbegriffe der relativen Optimierung</a>
  <ul class="collapse">
  <li><a href="#linearer-renditegenerierungsprozess" id="toc-linearer-renditegenerierungsprozess" class="nav-link" data-scroll-target="#linearer-renditegenerierungsprozess"><span class="header-section-number">3.2.1</span> Linearer Renditegenerierungsprozess</a></li>
  <li><a href="#portfolio-alpha-und-beta" id="toc-portfolio-alpha-und-beta" class="nav-link" data-scroll-target="#portfolio-alpha-und-beta"><span class="header-section-number">3.2.2</span> Portfolio-Alpha und Beta</a></li>
  <li><a href="#aktive-position-und-aktives-risiko" id="toc-aktive-position-und-aktives-risiko" class="nav-link" data-scroll-target="#aktive-position-und-aktives-risiko"><span class="header-section-number">3.2.3</span> Aktive Position und aktives Risiko</a></li>
  <li><a href="#aktives-beta" id="toc-aktives-beta" class="nav-link" data-scroll-target="#aktives-beta"><span class="header-section-number">3.2.4</span> Aktives Beta</a></li>
  <li><a href="#selektions--und-timingrisiko" id="toc-selektions--und-timingrisiko" class="nav-link" data-scroll-target="#selektions--und-timingrisiko"><span class="header-section-number">3.2.5</span> Selektions- und Timingrisiko</a></li>
  </ul></li>
  <li><a href="#zielfunktion-der-relativen-optimierung" id="toc-zielfunktion-der-relativen-optimierung" class="nav-link" data-scroll-target="#zielfunktion-der-relativen-optimierung"><span class="header-section-number">3.3</span> Zielfunktion der relativen Optimierung</a></li>
  <li><a href="#beginn-der-fallstudie" id="toc-beginn-der-fallstudie" class="nav-link" data-scroll-target="#beginn-der-fallstudie"><span class="header-section-number">3.4</span> Beginn der Fallstudie</a>
  <ul class="collapse">
  <li><a href="#laden-und-beschreiben-der-datenbasis" id="toc-laden-und-beschreiben-der-datenbasis" class="nav-link" data-scroll-target="#laden-und-beschreiben-der-datenbasis"><span class="header-section-number">3.4.1</span> Laden und Beschreiben der Datenbasis</a></li>
  <li><a href="#fall-a-das-aktive-portfolio-und-die-benchmark-entspringen-demselben-anlageuniversum" id="toc-fall-a-das-aktive-portfolio-und-die-benchmark-entspringen-demselben-anlageuniversum" class="nav-link" data-scroll-target="#fall-a-das-aktive-portfolio-und-die-benchmark-entspringen-demselben-anlageuniversum"><span class="header-section-number">3.4.2</span> Fall A: Das aktive Portfolio und die Benchmark entspringen demselben Anlageuniversum</a></li>
  <li><a href="#fall-b-relative-optimierung-bei-unterschiedlichen-anlageuniversen" id="toc-fall-b-relative-optimierung-bei-unterschiedlichen-anlageuniversen" class="nav-link" data-scroll-target="#fall-b-relative-optimierung-bei-unterschiedlichen-anlageuniversen"><span class="header-section-number">3.4.3</span> Fall B: Relative Optimierung bei unterschiedlichen Anlageuniversen</a></li>
  </ul></li>
  <li><a href="#lernvideos" id="toc-lernvideos" class="nav-link" data-scroll-target="#lernvideos"><span class="header-section-number">3.5</span> Lernvideos</a>
  <ul class="collapse">
  <li><a href="#video-teil-1" id="toc-video-teil-1" class="nav-link" data-scroll-target="#video-teil-1"><span class="header-section-number">3.5.1</span> Video Teil 1</a></li>
  <li><a href="#video-teil-2" id="toc-video-teil-2" class="nav-link" data-scroll-target="#video-teil-2"><span class="header-section-number">3.5.2</span> Video Teil 2</a></li>
  </ul></li>
  <li><a href="#literatur" id="toc-literatur" class="nav-link" data-scroll-target="#literatur"><span class="header-section-number">3.6</span> Literatur</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">


<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Relative Portfoliooptimierung</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Die folgenden Ausführungen zur relativen Portfoliooptimierung sind angelehnt an Poddig et al.&nbsp;(2009), S. 197-216. Der grundlegende Ansatz der relativen Optimierung im Rahmen der Portfoliokonstruktion geht dabei zurück auf Grinold und Kahn (2000).</p>
<section id="motivation" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="motivation"><span class="header-section-number">3.1</span> Motivation</h2>
<p>Ein möglicher Ausgangspunkt für einen relativen Optimierungsansatz ergibt sich durch die häufige Trennung der Ergebnisverantwortlichkeit beim aktiven Management. So ist bei Fremdverwaltung des Portfolios streng genommen eine Separierung der Rendite- und Risikoverantwortung notwendig. Der Investor überträgt hier die Vermögensverwaltung auf einen (Fremd-) Manager unter Vorgabe einer für den Portfoliomanager bindenden Benchmark. Der Investor akzeptiert also die Rendite und das Risiko der Benchmark. Er ist bereit, dieses zu tragen. Der Manager trägt demzufolge nicht die Verantwortung für die Benchmarkrendite und das Benchmarkrisiko, sondern nur für die <em>zusätzliche Rendite</em> und das <em>zusätzliche Risiko</em> des aktiven Portfolios. Konsequenz für den (Portfolio-) Manager ist, dass die absolute Optimierung eines Portfolios für ihn gar nicht sinnvoll ist. Relevant ist hier nur die zusätzliche Rendite (aktive Rendite) gegenüber dem dabei entstehenden zusätzlichen Risiko (aktives Risiko). Das optimale “relative” Portfolio ist gekennzeichnet durch den bestmöglichen Trade-off zwischen aktiver Rendite und aktivem Risiko relativ zur Benchmark. Gesucht ist also das optimale Portfolio <em>relativ</em> zur Benchmark. Eine solche Trennung der Ergebnisverantwortlichkeit ergibt sich beispielsweise auch bei der Verwaltung von Publikumsfonds, deren stratgische Ausrichtung für den Portfoliomanager zumeist gegeben ist und durch eine Benchmark fixiert wird. Eine aktive Portfoliostrategie kann dann mit der relativen Optimierung umgesetzt werden.</p>
<p>Ausgehend von einigen Kritikpunkten zur Vorgehensweise bei der absoluten Optimierung kann der Einsatz der relativen Optimierung ebenfalls begründet werden. Zentrale Voraussetzungen der absoluten Optimierung sind die “genaue” Prognostizierbarkeit der benötigten Inputparameter (im Sinne der ersten beiden Momente der Renditeverteilung) und die Tatsache, dass der Investor seine Nutzenfunktion kennt und diese auch genau beschreiben kann. Unter diesen Voraussetzungen liefert die absolute Optimierung konsequent das optimale Portfolio.</p>
<p>Ein Hauptkritikpunkt setzt an den Voraussetzungen der Erwartungsnutzentheorie an. Im Wesentlichen geht es um die Identifikation der Nutzenfunktion, welche sich in der Praxis als schwierig erweist.</p>
<p>Zudem ist die Prognose der Inputparameter aus der Sache heraus mit Unsicherheit behaftet. Finanzmarktprognosen sind nicht in der eigentlich benötigten Präzision bereitstellbar, selbst wenn es “nur” um die Momente der Verteilung von Zufallsvariablen geht. Aber gerade dies führt bei der absoluten Portfoliooptimierung zu Problemen. Die Sensitivität der Portfoliooptimierung in Bezug auf relativ kleine Veränderungen der geschätzten Inputparameter, gerade bei den prognostizierten Renditeerwartungswerten, ist im Allgemeinen vergleichsweise hoch. Aufgrund dessen ergibt sich schon bei kleinen Veränderungen der Renditeschätzungen ein relativ großer Umschichtungsbedarf bei der Portfoliobildung und somit auch eine gewisse “Instabilität” der Portfoliostruktur.</p>
<p>Neben der Instabilität ist bei der praktischen Portfoliooptimierung ferner eine Neigung zu “extremen” Positionen beim optimalen Portfolio und sogar die Bildung ökonomisch unplausibler Portfoliostrukturen zu beobachten. Dies ist zwar auch ein Folge der Prognoseproblematik, nicht der Optimierung an sich, aber die absolute Optimierung liefert aufgrund dieser Problematik oftmals Portfolios, welche der Investor wegen extremer Positionen in den einzelnen Assets nicht halten möchte. Eine ausführlichere Diskussion um die Schächen des Mean-Variance-Ansatzes mit entsprechenden Beispielen findet sich in Drobetz (2003, S. 206 ff.) und in Kapitel A3.1.</p>
<p>Damit sind weder die Effizienzkurve (wegen der Prognoseproblematik) noch die Nutzenfunktion (wegen der Identifikationsproblematik) hinreichend präzise bestimmbar. Nur mit beiden zusammen ist jedoch streng genommen das optimale Portfolio auffindbar.</p>
<p>Zur Lösung dieses Problems sind in Wissenschaft und Praxis verschiedene Ansätze entwickelt worden:</p>
<ul>
<li>als Konsequenz aus der Unmöglichkeit präziser Finanzmarktprognosen, Verzicht auf das aktive Portfoliomanagement und stattdessen die Durchführung eines <strong>passiven Managements mit Index Tracking</strong> (siehe Kapitel 9.);</li>
<li>Ansätze der <strong>robusten Portfoliooptimierung</strong> (siehe die Kapitel 5-8.): Einsatz verschiedenster Nebenbedingungen, robuste Schätzung der Inputparameter, Black-Litterman Portfoliooptimierungsansatz, Portfolio Resampling, risikogesteuerte Ansätze;</li>
</ul>
<p>Ein weiterer Ansatz ist die <strong>relative Optimierung</strong>. Hier werden die Inputparameter der Assets des Anlageuniversums in Relation zu einer Benchmark betrachtet und die Optimierung der Portfoliostruktur wird mit diesen relativen Größen durchgeführt. So bleibt eine Bindung des optimalen Portfolios an die Benchmark erhalten, womit inakzeptable Lösungen tendenziell vermieden werden.</p>
</section>
<section id="grundlagen-und-grundbegriffe-der-relativen-optimierung" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="grundlagen-und-grundbegriffe-der-relativen-optimierung"><span class="header-section-number">3.2</span> Grundlagen und Grundbegriffe der relativen Optimierung</h2>
<p>Bei der relativen Optimierung ist es üblich, die Rendite <span class="math inline">\(r_i\)</span> eines Assets <span class="math inline">\(i\)</span> in Form einer <em>Überschussrendite</em> <span class="math inline">\(r^´_i\)</span> über den risikofreien Zinssatz <span class="math inline">\(r_f\)</span> hinaus aufzufassen: <span class="math inline">\(r^´_i=r_i-r_f\)</span>. Wird der risikolose Zins als zeitkonstant angenommen, ist die Varianz-Kovarianzmatrix der Überschussrenditen gleich der Varianz-Kovarianzmatrix der totalen (absoluten) Renditen, d.h. <span class="math inline">\(\Sigma^´=\Sigma\)</span>.</p>
<section id="linearer-renditegenerierungsprozess" class="level3" data-number="3.2.1">
<h3 data-number="3.2.1" class="anchored" data-anchor-id="linearer-renditegenerierungsprozess"><span class="header-section-number">3.2.1</span> Linearer Renditegenerierungsprozess</h3>
<p>Die relative Optimierung unterstellt einen univariaten Renditegenerierungsprozess für jedes Asset <span class="math inline">\(i\)</span>:</p>
<p><span class="math display">\[ (1) \quad r^´_i=\alpha_i + \beta_i*r^´_B+\epsilon_i, \]</span></p>
<p>mit:</p>
<ul>
<li><span class="math inline">\(r^´_i\)</span>: Überschussrendite des i-ten Assets</li>
<li><span class="math inline">\(r^´_B\)</span>: Überschussrendite des Benchmarkportfolios B</li>
<li><span class="math inline">\(\alpha_i\)</span>: autonome Eigenrendite des i-ten Assets, Konstante</li>
<li><span class="math inline">\(\beta_i\)</span>: Sensitivität gegenüber dem Benchmarkportfolio</li>
<li><span class="math inline">\(\epsilon_i\)</span>: unsystematische, zufällige, nicht erklärbare Restgröße (auch <em>Residualrendite</em> oder <em>residuale Rendite</em> genannt).</li>
</ul>
<p>Dabei wird ferner für die Residualrenditen angenommen:</p>
<p><span class="math inline">\((2) \quad E(\epsilon_i)=0\)</span> <span class="math inline">\(\qquad\)</span> für alle <span class="math inline">\(i\)</span>, mit <span class="math inline">\(E()\)</span>: Erwartungswertoperator;</p>
<p><span class="math inline">\((3) \quad Var(\epsilon_i)=\sigma^2_{\epsilon_i}\)</span> <span class="math inline">\(\quad\)</span> endlich und konstant für alle <span class="math inline">\(i\)</span></p>
<p><span class="math inline">\((4) \quad Cov(\epsilon_i, r^´_B)=E((\epsilon_i-0)(r^´_B-\mu^´_B))=0\)</span> <span class="math inline">\(\quad\)</span> mit <span class="math inline">\(\mu^´_B=E(r^´_B)\)</span>: Erwartungswert der Benchmarkrendite</p>
<p><span class="math inline">\((5) \quad Cov(\epsilon_i, \epsilon_j)=E((\epsilon_i-0)(\epsilon_j-0))=0\)</span> <span class="math inline">\(\qquad\)</span> für alle <span class="math inline">\(i, j, i \neq j.\)</span></p>
<p>Damit lassen sich leicht die Erwartungswerte der Assetrenditen, deren Varianzen und die Kovarianzen zwischen den Assetrenditen bestimmen.</p>
<p>Für die erwartete (Überschuss-) Rendite, Varianz und Kovarianz des Assets <span class="math inline">\(i\)</span> gilt damit unter den gesetzten Annahmen:</p>
<p><span class="math inline">\((6) \quad E(r^´_i)=\mu^´_i=\alpha_i+\beta_i*\mu^´_B\)</span></p>
<p><span class="math inline">\((7) \quad \sigma^2_i=\beta^2_i*\sigma^2_B+\sigma^2_{\epsilon_i}\)</span></p>
<p><span class="math inline">\((8) \quad \sigma_{ij}=\beta_i*\beta_j*\sigma^2_B\)</span></p>
<p>Die Varianz, also das mit Asset <span class="math inline">\(i\)</span> verbundene Risiko, kann nach (7) in zwei Komponenten zerlegt werden. Ein Teil des Risikos <span class="math inline">\((\beta^2_i\sigma^2_B)\)</span> wird durch die Benchmark erklärt. Der zweite Teil <span class="math inline">\((\sigma^2_{\epsilon_i})\)</span> ist das sogenannte Restrisiko, auch <em>residuales Risiko</em> (“residual risk”) genannt. Aus den bisherigen Annahmen und Definitionen ergeben sich nun die für die relative Portfoliooptimierung relevanten Formeln.</p>
</section>
<section id="portfolio-alpha-und-beta" class="level3" data-number="3.2.2">
<h3 data-number="3.2.2" class="anchored" data-anchor-id="portfolio-alpha-und-beta"><span class="header-section-number">3.2.2</span> Portfolio-Alpha und Beta</h3>
<p>Für die Portfolioüberschussrendite gilt:</p>
<p><span class="math inline">\((1) \quad r^´_p=\alpha_p+\beta_p*r^´_B+\epsilon_P=\alpha^*_P+\beta_P*r^´_B\)</span> <span class="math inline">\(\qquad\)</span> mit <span class="math inline">\(\alpha^*_P=\alpha_P+\epsilon_P\)</span></p>
<p>Das Portfolio-Alpha und Beta wird durch die Gewichtung der Assets im Portfolio und deren Alpha- und Beta-Werte determiniert:</p>
<p><span class="math inline">\((2) \quad \alpha_P=w^T_P\alpha\)</span></p>
<p>mit <span class="math inline">\(\qquad\)</span> <span class="math inline">\(\alpha:\)</span> <span class="math inline">\(\quad\)</span> Vektor der autonomen Eigenrenditen der Assets</p>
<p><span class="math inline">\((3) \quad \beta_P=w^T_P\beta\)</span></p>
<p>mit <span class="math inline">\(\qquad\)</span> <span class="math inline">\(\beta:\)</span> <span class="math inline">\(\quad\)</span> Vektor der Sensitivitäten der enthaltenen Assets gegenüber dem Benchmarkportfolio <span class="math inline">\(B\)</span>.</p>
<p>Das Risiko (die Varianz) eines Portfolios kann ebenso wie nach Gleichung (7) oben in zwei Komponenten zerlegt werden. Ein Teil des Risikos <span class="math inline">\((\beta^2_P\sigma^2_B)\)</span> wird durch die Benchmark erklärt. Der zweite Teil <span class="math inline">\((\sigma^2_{\epsilon_P})\)</span> stellt das Restrisiko (residuales Risiko) dar:</p>
<p><span class="math inline">\((4) \quad \sigma^2_P=\beta^2_P*\sigma^2_B+\sigma^2_{\epsilon_P}\)</span></p>
<p>bzw. ergibt sich das residuale Risiko des Portfolios als:</p>
<p><span class="math inline">\((5) \quad \sigma^2_{\epsilon_P}=\sigma^2_P-\beta^2_P*\sigma^2_B.\)</span></p>
<p>Das Risiko von Portfolio <span class="math inline">\(P\)</span> und Benchmark <span class="math inline">\(B\)</span> berechnen sich wie bekannt:</p>
<p><span class="math inline">\((6) \quad \sigma^2_P=w^T_P\Sigma w_P\)</span></p>
<p><span class="math inline">\((7) \quad \sigma^2_B=w^T_B\Sigma w_B\)</span></p>
<p>Eingesetzt in (5) folgt:</p>
<p><span class="math inline">\((8) \quad \sigma^2_{\epsilon_P}=w^T_P\Sigma w_P-(w^T_P\beta)^2*w^T_B\Sigma w_B.\)</span></p>
</section>
<section id="aktive-position-und-aktives-risiko" class="level3" data-number="3.2.3">
<h3 data-number="3.2.3" class="anchored" data-anchor-id="aktive-position-und-aktives-risiko"><span class="header-section-number">3.2.3</span> Aktive Position und aktives Risiko</h3>
<p>Die relative Optimierung zeichnet sich im Gegensatz zur absoluten Optimierung durch den Bezug zur Benchmark aus, ohne jedoch zum passiven Portfoliomanagement zu zählen. Die Abweichung der Assetgewichte im Portfolio zu den jeweiligen Assetgewichten in der Benchmark wird auch als <em>aktive Position</em> bezeichnet. Die aktive Position ist folglich definiert als Differenzgewichte zwischen gehaltenem Portfolio <span class="math inline">\(P\)</span> und Benchmark <span class="math inline">\(B\)</span>:</p>
<p><span class="math inline">\((1) \quad w_A=w_P-w_B.\)</span></p>
<p>Das auf die aktive Position zurückzuführende Risiko wird auch <em>aktives Risiko</em> (aktive Varianz) bezeichnet und ergibt sich als:</p>
<p><span class="math inline">\((2) \quad \sigma^2_{AP}=w^T_A\Sigma w_A.\)</span></p>
</section>
<section id="aktives-beta" class="level3" data-number="3.2.4">
<h3 data-number="3.2.4" class="anchored" data-anchor-id="aktives-beta"><span class="header-section-number">3.2.4</span> Aktives Beta</h3>
<p>Analog zur Bestimmung des aktiven Risikos ergibt sich auch ein <em>aktives Beta</em>. Das aktive Beta ist die Differenz zwischen Portfolio- und Benchmark-Beta (welches definitionsgemäß eins beträgt):</p>
<p><span class="math inline">\((1) \quad \beta_{AP}=\beta_P-\beta_B=\beta_P-1\)</span></p>
<p>mit <span class="math inline">\(\qquad\)</span> <span class="math inline">\(\beta_{AP}:\)</span> <span class="math inline">\(\quad\)</span> aktives Beta.</p>
<p>Für die aktive Varianz (das aktive Risiko) gilt damit (siehe zur Herleitung der Formel Poddig et al., 2009, S. 240-241):</p>
<p><span class="math inline">\((2) \quad \sigma^2_{AP}=\beta^2_{AP}\sigma^2_B + \sigma^2_{\epsilon_P}\)</span></p>
</section>
<section id="selektions--und-timingrisiko" class="level3" data-number="3.2.5">
<h3 data-number="3.2.5" class="anchored" data-anchor-id="selektions--und-timingrisiko"><span class="header-section-number">3.2.5</span> Selektions- und Timingrisiko</h3>
<p>Für die Interpretation der Gleichung (2) sind zwei verschiedene Risikoarten zu definieren. Man unterscheidet Risiko aufgrund von Selektion und Risiko aufgrund von Timing. Selektionsfähigkeit beschreibt das Können eines Portfoliomanagers, überdurchschnittlich renditeträchtige Wertpapiere zu identifizieren. Dies bedeutet eine gute Portfolioperformance aufgrund der Auswahl der einzelnen Assets. Einem Portfoliomanager wird Selektionsfähigkeit beispielsweise dann zugeschrieben, wenn das von ihm zusammengestellte Portfolio ein signifikant positives Alpha aufweist. Timingfähigkeit beschreibt hingegen die Fähigkeit des Portfoliomanagers in Zeiträumen, in denen die Benchmark eine positive (Überschuss-) Rendite aufweist, mit dem gemanagten Portfolio eine zur Benchmarkrendite stärker steigende (Überschuss-) Rendite durch aktive Gestaltung der Sensitivität <span class="math inline">\(\beta\)</span> zu erzielen. Umgekehrt sollte das aktiv gemanagte Portfolio bei Timingfähigkeit in fallenden Marktphasen eine zur Benchmark weniger stark fallende (Überschuss-) Rendite erzielen.</p>
<p>Das aktive Risiko (vgl. Formel (2)) ist infolgedessen in das Risiko aufgrund von Timing <span class="math inline">\(\beta^2_{AP}\sigma^2_B\)</span> und das durch <span class="math inline">\(\sigma^2_{\epsilon_P}\)</span> repräsentierte Risiko aufgrund von Selektion zu trennen.</p>
<p>Sofern bei der relativen Optimierung die Timingkomponente bewusst ausgeschlossen wird, also:</p>
<p><span class="math inline">\((1) \quad \beta_{P}=\beta_B = 1 \Leftrightarrow \beta_{AP}=0\)</span></p>
<p>explizit gefordert wird, so vereinfacht sich (2) zu:</p>
<p><span class="math inline">\((2^´) \quad \sigma^2_{AP}= \sigma^2_{\epsilon_P}\)</span></p>
<p>Dies impliziert die Gleichsetzung des aktiven Risikos mit dem residualen Risiko, welches das “Selektionsrisiko” widerspiegelt. Die Forderung nach <span class="math inline">\((2^´)\)</span> wird im Folgenden stets gesetzt (vgl. Grinold und Kahn, 2000, S. 102, und Poddig et al., 2009, S. 213f., zur Begründung des Ausschlusses der Timingkomponente bei der relativen Optimierung).</p>
</section>
</section>
<section id="zielfunktion-der-relativen-optimierung" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="zielfunktion-der-relativen-optimierung"><span class="header-section-number">3.3</span> Zielfunktion der relativen Optimierung</h2>
<p>Aus den bisherigen Überlegungen und unter Vernachlässigung der Timingkomponente des aktiven Risikos lässt sich folgende Zielfunktion der relativen Optimierung aus der Zielfunktion der absoluten Optimierung herleiten (siehe Poddig et al., 2009, S. 209-216):</p>
<p><span class="math display">\[
\begin{split}
\\(1) \quad ZF(w) = \alpha_P-\lambda\sigma^2_{\epsilon_P} \rightarrow \max_{w}!, \\
\end{split}
\]</span></p>
<p>wobei <span class="math inline">\(\lambda\)</span> den anlegerindividuellen Risikoaversionskoeffizienten angibt. In Matrizenschreibweise erhält man:</p>
<p><span class="math display">\[(2) \quad ZF(w) = w_p ^T\alpha-\lambda(w_P^T\Sigma w_P-(w_P^T\beta)^2*w_B^T\Sigma w_B)\]</span></p>
<p>bzw. alternativ (da <span class="math inline">\(\beta_P=1\)</span> bzw. <span class="math inline">\(\beta_{AP}=0\)</span> im Folgenden gesetzt werden)</p>
<p><span class="math inline">\((3) \quad ZF(w) = w_p ^T\alpha-\lambda(w_A^T\Sigma w_A).\)</span></p>
<p>Dies entspricht der Maximierung der Differenz von Portfolio-Alpha und dem mit dem Risikoaversionsparameter gewichteten Selektionsrisiko (oder residualen Risiko), welches unter der Annahme einer nicht existenten Timingkomponente zugleich dem aktiven Risiko entspricht.</p>
<p>Die zentralen Nebenbedingungen (Budgetrestriktion und Verbot von Leerverkäufen) werden um den Ausschluss der Timingkomponente ergänzt:</p>
<p><span class="math display">\[
\begin{split}
&amp; \text{(a)}\ w^{T}\iota = 1 \quad bzw. \quad \ w_A^{T}\iota = 0 \qquad \text{(Budgetrestriktion)}, \\
&amp; \text{(b)}\ w\geqq 0 \qquad \text{(Leerverkaufsverbot)}, \\
&amp; \text{(c)}\ \beta_P=1 \quad \Leftrightarrow \quad \beta_{AP}=0 \quad \text{(kein Timing)}.
\end{split}
\]</span></p>
<p>Damit ist das Optimierungsproblem für die relative Optimierung formuliert. Es wird im nächsten Kapitel im Rahmen einer Fallstudie näher veranschaulicht.</p>
</section>
<section id="beginn-der-fallstudie" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="beginn-der-fallstudie"><span class="header-section-number">3.4</span> Beginn der Fallstudie</h2>
<p>Wir starten mit dem Import der benötigten Pakete.</p>
<div id="cell-6" class="cell" data-execution_count="2">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="im">from</span> scipy.optimize <span class="im">import</span> minimize</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<section id="laden-und-beschreiben-der-datenbasis" class="level3" data-number="3.4.1">
<h3 data-number="3.4.1" class="anchored" data-anchor-id="laden-und-beschreiben-der-datenbasis"><span class="header-section-number">3.4.1</span> Laden und Beschreiben der Datenbasis</h3>
<p>Das beispielhafte Anlageuniversum der Fallstudie umfasst acht Unternehmen aus den folgenden Branchen: Technologie, Gesundheit, Nahrungsmittel, Pharma, Energie sowie Luft- und Raumfahrt. Die Unternehmen sind: Costco Wholesale (COST), Cisco Systems (CSCO), IBM (IBM), Intel (INTC), Merk (MRK), Microsoft (MSFT), AT&amp;T (T), und Exxon Mobil Corporation (XOM).</p>
<p>Die Datengrundlage stellen Monatsanfangskurse (“Adjusted Close”) über einen 5-Jahres-Zeitraum vom 1.12.2004 bis zum 1.12.2009 dar. Die Stichprobe enthält somit 61 Zeitreihenbeobachtungen.</p>
<div id="cell-8" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1"></a><span class="co"># hier den Pfad zur Datei eingeben</span></span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="co"># cd "..."</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div id="cell-9" class="cell" data-execution_count="3">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1"></a>frame <span class="op">=</span> pd.read_excel(<span class="st">'Kapitel A1.xlsx'</span>, <span class="st">'Tabelle1'</span>, index_col<span class="op">=</span><span class="dv">0</span>, parse_dates<span class="op">=</span><span class="va">True</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div id="cell-10" class="cell" data-execution_count="4">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1"></a>frame.head()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="4">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">ABT</th>
<th data-quarto-table-cell-role="th">BA</th>
<th data-quarto-table-cell-role="th">COST</th>
<th data-quarto-table-cell-role="th">CSCO</th>
<th data-quarto-table-cell-role="th">IBM</th>
<th data-quarto-table-cell-role="th">INTC</th>
<th data-quarto-table-cell-role="th">MRK</th>
<th data-quarto-table-cell-role="th">MSFT</th>
<th data-quarto-table-cell-role="th">T</th>
<th data-quarto-table-cell-role="th">XOM</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">2004-12-01</th>
<td>46.65</td>
<td>51.77</td>
<td>48.41</td>
<td>19.32</td>
<td>98.58</td>
<td>23.39</td>
<td>32.14</td>
<td>26.72</td>
<td>25.77</td>
<td>51.26</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2005-01-03</th>
<td>45.02</td>
<td>50.60</td>
<td>47.27</td>
<td>18.04</td>
<td>93.42</td>
<td>22.45</td>
<td>28.05</td>
<td>26.28</td>
<td>23.76</td>
<td>51.60</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2005-02-01</th>
<td>45.99</td>
<td>54.97</td>
<td>46.59</td>
<td>17.42</td>
<td>92.58</td>
<td>23.99</td>
<td>31.70</td>
<td>25.16</td>
<td>24.06</td>
<td>63.31</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2005-03-01</th>
<td>46.62</td>
<td>58.46</td>
<td>44.18</td>
<td>17.89</td>
<td>91.38</td>
<td>23.23</td>
<td>32.37</td>
<td>24.17</td>
<td>23.69</td>
<td>59.60</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2005-04-01</th>
<td>49.16</td>
<td>59.52</td>
<td>40.63</td>
<td>17.27</td>
<td>76.38</td>
<td>23.52</td>
<td>33.90</td>
<td>25.30</td>
<td>23.80</td>
<td>57.03</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="fall-a-das-aktive-portfolio-und-die-benchmark-entspringen-demselben-anlageuniversum" class="level3" data-number="3.4.2">
<h3 data-number="3.4.2" class="anchored" data-anchor-id="fall-a-das-aktive-portfolio-und-die-benchmark-entspringen-demselben-anlageuniversum"><span class="header-section-number">3.4.2</span> Fall A: Das aktive Portfolio und die Benchmark entspringen demselben Anlageuniversum</h3>
<p>Wir berechnen zunächst diskrete Monatsrenditen über <code>frame.pct_change()</code>. Annahmegemäß beträgt der zeitkonstante annualisierte risikolose Zins 4%, was einem Monatszinssatz von 0,327374% entspricht. Die absoluten Renditen werden dann in Überschussrenditen überführt (DataFrame <code>ex_returns</code>). Auf Basis der Überschussrenditen ermitteln wir den Vektor der zukünftigen erwarteten Assetrenditen <span class="math inline">\(\mu\)</span> und die zukünftige Varianz-Kovarianzmatrix <span class="math inline">\(\Sigma\)</span> nach der Methode der <strong>historisch basierten Schätzung</strong>.</p>
<div id="cell-13" class="cell" data-execution_count="5">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1"></a><span class="co"># calculation based on discrete returns</span></span>
<span id="cb5-2"><a href="#cb5-2"></a>returns <span class="op">=</span> frame.pct_change().dropna()</span>
<span id="cb5-3"><a href="#cb5-3"></a>returns_new <span class="op">=</span> returns.drop([<span class="st">'ABT'</span>, <span class="st">'BA'</span>], <span class="dv">1</span>) <span class="co"># we drop first two tickers</span></span>
<span id="cb5-4"><a href="#cb5-4"></a></span>
<span id="cb5-5"><a href="#cb5-5"></a>rf <span class="op">=</span> (<span class="dv">1</span><span class="op">+</span><span class="fl">0.04</span>)<span class="op">**</span>(<span class="dv">1</span><span class="op">/</span><span class="dv">12</span>)<span class="op">-</span><span class="dv">1</span> <span class="co"># risk-free rate assumed 4% p.a.</span></span>
<span id="cb5-6"><a href="#cb5-6"></a>ex_returns <span class="op">=</span> returns_new <span class="op">-</span> rf</span>
<span id="cb5-7"><a href="#cb5-7"></a>means <span class="op">=</span> ex_returns.mean().values<span class="op">*</span><span class="dv">100</span> <span class="co"># non-annualised!</span></span>
<span id="cb5-8"><a href="#cb5-8"></a>Sigma <span class="op">=</span> ex_returns.cov().values <span class="co"># non-annualised!</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>Das Benchmarkportfolio wird hier willkürlich als gleich gewichtetes Portfolio aller Assets gewählt. Durch Aufruf von <code>np.tile(A,x)</code> wird ein Array generiert, welches x-Mal den Wert A enthält. Die Anzahl der Assets in unserem Beispieluniversum erhalten wir über <code>means.shape[0]</code>.</p>
<p>Im Folgenden werden wir für die Matrizenmultiplikation häufig Arrays der Dimension <span class="math inline">\(N\)</span> über <code>np.matrix</code> in <span class="math inline">\(1xN\)</span> Zeilenvektoren transformieren.</p>
<p>Die Zeitreihe <code>benchmark</code> der Überschussrenditen <span class="math inline">\(r^´_B\)</span> der Benchmark erhalten wir indem zunächst die Assetrenditen über <code>ex_returns.multiply(Weight_1N)</code> zeilenweise mit den Benchmarkgewichten <code>Weight_1N</code> multipliziert werden und dann die gewichtete Summe der Zeilen gebildet wird.</p>
<div id="cell-15" class="cell" data-execution_count="6">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1"></a><span class="co"># using an equally-weighted benchmark</span></span>
<span id="cb6-2"><a href="#cb6-2"></a>Weight_1N <span class="op">=</span> np.tile(<span class="fl">1.0</span><span class="op">/</span>means.shape[<span class="dv">0</span>], means.shape[<span class="dv">0</span>])</span>
<span id="cb6-3"><a href="#cb6-3"></a>bench_w <span class="op">=</span> np.matrix(Weight_1N) <span class="co"># benchmark portfolio weights as row vector</span></span>
<span id="cb6-4"><a href="#cb6-4"></a>benchmark <span class="op">=</span> ex_returns.multiply(Weight_1N).<span class="bu">sum</span>(axis<span class="op">=</span><span class="dv">1</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p><strong>Schätzung weiterer Inputparameter: Alpha und Beta</strong></p>
<p>Als zentrale Inputparameter für eine relative Optimierung gehen die Alpha- und Beta-Parameter in die Berechnungen ein. Diese erklären die Überschussrenditen der einzelnen Assets als Summe der autonomen Eigenrendite des jeweiligen Assets und aus einem von der Benchmark abhängigen Renditeanteil. Wird ein linearer Renditegenerierungsprozess unterstellt, so ist eine einfache historisch basierte Schätzung in diesem Fall über eine Regression der Renditen der Assets auf die Benchmark möglich.</p>
<p>Grundsätzlich gelten für Alpha- und Beta-Parameter dieselben Überlegungen wie hinsichtlich der erwarteten Renditen und zukünftigen Risiken bei der absoluten Optimierung. Die Alpha- und Beta-Werte sind ex ante Größen, womit Prognosen (Schätzungen) dieser Größen unvermeidbar sind. Ebenso ist hier zu bedenken, dass die Güte der Alpha- und Beta-Prognosen die spätere Performance des aktiven Portfolios bestimmt. Auch hier ist die Prognose der wertgenerierende Prozess.</p>
<p>Zum Zwecke der Fallstudie wird nachfolgend der pragmatische Ansatz der einfachen historisch basierten Schätzung mittels univariater linearer Regression umgesetzt. Poddig et al.&nbsp;(2009, S. 220-223) geben einige Hinweise auf weitere Verfahren speziell zur Prognose von Alpha- und Beta-Parametern.</p>
<p>Zur Umsetzung der linearen Kleinste-Quadrate (Ordinary Least Squares - OLS) Regression laden wir zunächst die Module <code>linear_model</code> und <code>tools</code> aus dem Paket <code>statsmodels</code>.</p>
<div id="cell-17" class="cell" data-execution_count="7">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1"></a><span class="im">import</span> statsmodels.regression.linear_model <span class="im">as</span> sm</span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="im">import</span> statsmodels.tools.tools <span class="im">as</span> sm2</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>Die Matrix <code>x2</code> unten enthält die exogenen Variablen der Regression. In unserem Fall stellt die erste Spalte einen Vektor mit Einsen dar, die die Konstante (Achsenabschnitt=Alpha) der Regression modellieren. Diese Spalte wird über <code>add_constant</code> erzeugt. Die zweite Spalte ist der Vektor der Benchmarkrenditen. Die y-Variable der Regression ist die entsprechende Spalte des DataFrames der Überschussrenditen der Assets.</p>
<p>Die Schätzung eines OLS Models erfolgt über <code>sm.OLS(y-Variable, (Konstante,x-Variablen)).fit()</code>. Die geschätzen Regressionskoeffizienten sind im Array <code>params</code> enthalten. Die Regressionen werden in Form einer for-Schleife über die Spalten von <code>ex_returns</code> iteriert, wobei wiederum die <code>enumerate</code> Methode verwendet wird, um den Interationsindex für die Indixierung der Ergebnis-Arrays <code>alpha</code> und <code>beta</code> zu verwenden.</p>
<div id="cell-19" class="cell" data-execution_count="8">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1"></a><span class="co"># calculating vectors of alphas and betas</span></span>
<span id="cb8-2"><a href="#cb8-2"></a>alpha <span class="op">=</span> np.zeros(ex_returns.columns.shape)</span>
<span id="cb8-3"><a href="#cb8-3"></a>beta <span class="op">=</span> np.zeros(ex_returns.columns.shape)</span>
<span id="cb8-4"><a href="#cb8-4"></a></span>
<span id="cb8-5"><a href="#cb8-5"></a>x1 <span class="op">=</span> benchmark</span>
<span id="cb8-6"><a href="#cb8-6"></a>x2 <span class="op">=</span> sm2.add_constant(x1)</span>
<span id="cb8-7"><a href="#cb8-7"></a></span>
<span id="cb8-8"><a href="#cb8-8"></a><span class="cf">for</span> idx, ticker <span class="kw">in</span> <span class="bu">enumerate</span>(ex_returns.columns):</span>
<span id="cb8-9"><a href="#cb8-9"></a>    reg <span class="op">=</span> sm.OLS(ex_returns[ticker], x2).fit()</span>
<span id="cb8-10"><a href="#cb8-10"></a>    parameter <span class="op">=</span> np.asarray(reg.params)</span>
<span id="cb8-11"><a href="#cb8-11"></a>    alpha[idx] <span class="op">=</span> parameter[<span class="dv">0</span>]</span>
<span id="cb8-12"><a href="#cb8-12"></a>    beta[idx] <span class="op">=</span> parameter[<span class="dv">1</span>]</span>
<span id="cb8-13"><a href="#cb8-13"></a>df <span class="op">=</span>pd.DataFrame({<span class="st">'Alpha'</span>: alpha, <span class="st">'Beta'</span>: beta}, index<span class="op">=</span>ex_returns.columns)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>Aus Gründen der besseren Übersicht geben wir die Schätzergebnisse in Form eines DataFrames wieder.</p>
<div id="cell-21" class="cell" data-execution_count="9">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1"></a>df</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="9">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Alpha</th>
<th data-quarto-table-cell-role="th">Beta</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">COST</th>
<td>0.000870</td>
<td>0.900610</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">CSCO</th>
<td>0.001147</td>
<td>1.285882</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">IBM</th>
<td>0.001738</td>
<td>0.798834</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">INTC</th>
<td>-0.005285</td>
<td>1.366525</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">MRK</th>
<td>0.000367</td>
<td>1.158739</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">MSFT</th>
<td>-0.000665</td>
<td>1.146965</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">T</th>
<td>-0.002151</td>
<td>0.812048</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">XOM</th>
<td>0.003978</td>
<td>0.530397</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Für die nachfolgende Matrizenmultiplikation transformieren wir die beiden Ergebnis-Arrays in Zeilenvektoren.</p>
<div id="cell-23" class="cell" data-execution_count="10">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1"></a>alpha <span class="op">=</span> np.matrix(alpha)</span>
<span id="cb10-2"><a href="#cb10-2"></a>beta <span class="op">=</span> np.matrix(beta)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>Nun schreiben wird die Zielfunktion der Optimierung in Form der Funktion <code>relative_opt1</code>. <strong>Wichtig</strong>: Diese Funktion erfordert, dass die Arrays der Alpha’s, Beta’s, und der Benchmark-Gewichte vorher(!) in Zeilenvektoren überführt wurden.</p>
<p>Die Funktion berechnet auf Basis eines Eingabe-Arrays von Portfolio-Anteilsgewichten <span class="math inline">\(w_P\)</span> das Portfolio Alpha <span class="math inline">\((w_p ^T\alpha)\)</span>, Beta <span class="math inline">\((w_P^T\beta)\)</span>, die Varianz der Portfoliorendite <span class="math inline">\((w_P^T\Sigma w_P)\)</span> und der Benchmarkrendite <span class="math inline">\((w_B^T\Sigma w_B)\)</span>, und das residuale Risiko <span class="math inline">\((w_P^T\Sigma w_P-(w_P^T\beta)^2*w_B^T\Sigma w_B)\)</span>. Als Ausgabe liefert die Funktion den mit -1 multiplizierten Zielfunktionswert, da es sich um ein Maximierungsproblem handelt:</p>
<p><span class="math inline">\(\quad ZF(w) = w_p ^T\alpha-\lambda(w_P^T\Sigma w_P-(w_P^T\beta)^2*w_B^T\Sigma w_B)\)</span></p>
<div id="cell-25" class="cell" data-execution_count="11">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1"></a><span class="co"># target function: active alpha - lambda * residual risk</span></span>
<span id="cb11-2"><a href="#cb11-2"></a><span class="co"># alpha, beta, bench_w have to be defined prior as vectors</span></span>
<span id="cb11-3"><a href="#cb11-3"></a><span class="kw">def</span> relative_opt1(w, lambda0):</span>
<span id="cb11-4"><a href="#cb11-4"></a>    port_w <span class="op">=</span> np.matrix(w) <span class="co"># w is a row (not column!) vector</span></span>
<span id="cb11-5"><a href="#cb11-5"></a>    port_alpha <span class="op">=</span> (port_w<span class="op">*</span>alpha.T)[<span class="dv">0</span>,<span class="dv">0</span>]</span>
<span id="cb11-6"><a href="#cb11-6"></a>    port_beta <span class="op">=</span> (port_w<span class="op">*</span>beta.T)[<span class="dv">0</span>,<span class="dv">0</span>]</span>
<span id="cb11-7"><a href="#cb11-7"></a>    port_var <span class="op">=</span> (port_w <span class="op">*</span> Sigma<span class="op">*</span>port_w.T)[<span class="dv">0</span>,<span class="dv">0</span>]</span>
<span id="cb11-8"><a href="#cb11-8"></a>    bench_var <span class="op">=</span> (bench_w <span class="op">*</span> Sigma <span class="op">*</span> bench_w.T)[<span class="dv">0</span>,<span class="dv">0</span>]</span>
<span id="cb11-9"><a href="#cb11-9"></a>    resid_var <span class="op">=</span> port_var <span class="op">-</span> port_beta<span class="op">**</span><span class="dv">2</span><span class="op">*</span>bench_var</span>
<span id="cb11-10"><a href="#cb11-10"></a>    <span class="cf">return</span> <span class="op">-</span>(port_alpha <span class="op">-</span> lambda0 <span class="op">*</span> resid_var) <span class="co"># -1 for minimization problem</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>Die zusätzliche Nebenbedingung (kein Timing), dass das Portfolio-Beta eins bzw. das aktive Beta null betragen muss, implementieren wir ähnlich wie die Budgetrestriktion über eine <code>lambda</code>-Funktion, die wir null setzen und dem Tuple <code>cons</code> der Nebenbedingungs-Dictionaries hinzufügen.</p>
<div id="cell-27" class="cell" data-execution_count="12">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1"></a>cons <span class="op">=</span> ({<span class="st">'type'</span>: <span class="st">'eq'</span>, <span class="st">'fun'</span>: <span class="kw">lambda</span> x: np.<span class="bu">sum</span>(x) <span class="op">-</span> <span class="dv">1</span>},</span>
<span id="cb12-2"><a href="#cb12-2"></a>        {<span class="st">'type'</span>: <span class="st">'eq'</span>, <span class="st">'fun'</span>: <span class="kw">lambda</span> x: (np.matrix(x)<span class="op">*</span>beta.T)[<span class="dv">0</span>,<span class="dv">0</span>] <span class="op">-</span> <span class="dv">1</span>})</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>Wir setzen den Risikoaversionskoeffizienten auf den Wert <span class="math inline">\(\lambda=-0.3705867\)</span>, verwenden ein gleich gewichtetes Portfolio als Startlösung für die numerische Optimierung und implementieren Bestandsgenzen (min=5%, max=40%). Die Anwendung von <code>minimize</code> ergibt die folgenden optimierten Portfoliogewichte.</p>
<div id="cell-29" class="cell" data-execution_count="13">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1"></a>lambda0 <span class="op">=</span> <span class="op">-</span><span class="fl">0.3705867</span></span>
<span id="cb13-2"><a href="#cb13-2"></a>bound <span class="op">=</span> (<span class="fl">0.05</span>,<span class="fl">0.40</span>)</span>
<span id="cb13-3"><a href="#cb13-3"></a>bounds <span class="op">=</span> <span class="bu">tuple</span>(bound <span class="cf">for</span> asset <span class="kw">in</span> <span class="bu">range</span>(alpha.shape[<span class="dv">1</span>]))</span>
<span id="cb13-4"><a href="#cb13-4"></a>res <span class="op">=</span> minimize(relative_opt1, Weight_1N, args<span class="op">=</span>lambda0,</span>
<span id="cb13-5"><a href="#cb13-5"></a>                        method<span class="op">=</span><span class="st">'SLSQP'</span>, bounds<span class="op">=</span>bounds, constraints<span class="op">=</span>cons,tol<span class="op">=</span><span class="fl">1e-10</span>)</span>
<span id="cb13-6"><a href="#cb13-6"></a>pd.DataFrame([<span class="bu">round</span>(x,<span class="dv">4</span>) <span class="cf">for</span> x <span class="kw">in</span> res.x],index<span class="op">=</span>ex_returns.columns).T </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="13">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">COST</th>
<th data-quarto-table-cell-role="th">CSCO</th>
<th data-quarto-table-cell-role="th">IBM</th>
<th data-quarto-table-cell-role="th">INTC</th>
<th data-quarto-table-cell-role="th">MRK</th>
<th data-quarto-table-cell-role="th">MSFT</th>
<th data-quarto-table-cell-role="th">T</th>
<th data-quarto-table-cell-role="th">XOM</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>0.05</td>
<td>0.4</td>
<td>0.05</td>
<td>0.05</td>
<td>0.0776</td>
<td>0.05</td>
<td>0.05</td>
<td>0.2724</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Wir überprüfen kurz ob dieser Gewichtsvektor die No-Timing-Bedingung auch wirklich einhält:</p>
<div id="cell-31" class="cell" data-execution_count="14">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1"></a><span class="co"># function to calculate the portfolio beta</span></span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="kw">def</span> port_beta(w,beta):</span>
<span id="cb14-3"><a href="#cb14-3"></a>    port_w <span class="op">=</span> np.matrix(w) <span class="co"># w is a row (not column!) vector</span></span>
<span id="cb14-4"><a href="#cb14-4"></a>    port_beta <span class="op">=</span> (port_w<span class="op">*</span>beta.T)[<span class="dv">0</span>,<span class="dv">0</span>]</span>
<span id="cb14-5"><a href="#cb14-5"></a>    <span class="cf">return</span> port_beta</span>
<span id="cb14-6"><a href="#cb14-6"></a></span>
<span id="cb14-7"><a href="#cb14-7"></a></span>
<span id="cb14-8"><a href="#cb14-8"></a>port_beta(res.x,beta)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="14">
<pre><code>0.9999999999038441</code></pre>
</div>
</div>
<p>Dies ist offensichtlich der Fall! Das Portfolio liefert eine erwartete annualisierte Rendite von:</p>
<div id="cell-33" class="cell" data-execution_count="15">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1"></a>(np.matrix(means)<span class="op">*</span> np.matrix(res.x).T)[<span class="dv">0</span>,<span class="dv">0</span>]<span class="op">*</span><span class="dv">12</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="15">
<pre><code>3.6127468232671593</code></pre>
</div>
</div>
</section>
<section id="fall-b-relative-optimierung-bei-unterschiedlichen-anlageuniversen" class="level3" data-number="3.4.3">
<h3 data-number="3.4.3" class="anchored" data-anchor-id="fall-b-relative-optimierung-bei-unterschiedlichen-anlageuniversen"><span class="header-section-number">3.4.3</span> Fall B: Relative Optimierung bei unterschiedlichen Anlageuniversen</h3>
<p>In der obigen Fallstudie ist das Anlageuniversum für das aktive Portfolio und die Benchmark <em>identisch</em>. Dies ist jedoch ein Idealfall, der in der Praxis so nicht immer vorliegt. In der Praxis ergibt sich häufig das Problem unterschiedlicher Anlageuniversen. Oftmals stehen also nicht alle Anlagen des Benchmarkportfolios für eine Aufnahme in das aktive Portfolio zur Verfügung. Im Extremfall ist das Benchmarkportfolio ein synthetischer Index, gegen das ein aus nicht im Index enthaltenen Einzeltiteln bestehendes aktives Portfolio zu optimieren ist. Aus diesen Umständen resultiert die Frage, wie eine relative Optimierung durchgeführt wird, wenn sich die Anlageuniversen unterscheiden.</p>
<p>Zur Illustration des geschilderten Problems verwenden wir nun den S&amp;P500 Index als Benchmark. Die Aufgabenstellung besteht darin, die relative Optimierung des aktiven Portfolios gegen diese Benchmark durchzuführen. Dabei wird im Folgenden bewusst so getan, als ob der S&amp;P500 ein synthetischer Index sei.</p>
<div id="cell-35" class="cell" data-execution_count="16">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1"></a><span class="co"># benchmark is now the S&amp;P500 index, therefore we need a new dataframe</span></span>
<span id="cb18-2"><a href="#cb18-2"></a>frame1 <span class="op">=</span> pd.read_excel(<span class="st">'Kapitel A2_1.xlsx'</span>, <span class="st">'Tabelle1'</span>, index_col<span class="op">=</span><span class="dv">0</span>, parse_dates<span class="op">=</span><span class="va">True</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div id="cell-36" class="cell" data-execution_count="17">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1"></a>frame1.head()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="17">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">COST</th>
<th data-quarto-table-cell-role="th">CSCO</th>
<th data-quarto-table-cell-role="th">IBM</th>
<th data-quarto-table-cell-role="th">INTC</th>
<th data-quarto-table-cell-role="th">MRK</th>
<th data-quarto-table-cell-role="th">MSFT</th>
<th data-quarto-table-cell-role="th">T</th>
<th data-quarto-table-cell-role="th">XOM</th>
<th data-quarto-table-cell-role="th">S&amp;P500</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">2004-12-01</th>
<td>48.41</td>
<td>19.32</td>
<td>98.58</td>
<td>23.39</td>
<td>32.14</td>
<td>26.72</td>
<td>25.77</td>
<td>51.26</td>
<td>1211.92</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2005-01-03</th>
<td>47.27</td>
<td>18.04</td>
<td>93.42</td>
<td>22.45</td>
<td>28.05</td>
<td>26.28</td>
<td>23.76</td>
<td>51.60</td>
<td>1181.27</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2005-02-01</th>
<td>46.59</td>
<td>17.42</td>
<td>92.58</td>
<td>23.99</td>
<td>31.70</td>
<td>25.16</td>
<td>24.06</td>
<td>63.31</td>
<td>1203.60</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2005-03-01</th>
<td>44.18</td>
<td>17.89</td>
<td>91.38</td>
<td>23.23</td>
<td>32.37</td>
<td>24.17</td>
<td>23.69</td>
<td>59.60</td>
<td>1180.59</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2005-04-01</th>
<td>40.63</td>
<td>17.27</td>
<td>76.38</td>
<td>23.52</td>
<td>33.90</td>
<td>25.30</td>
<td>23.80</td>
<td>57.03</td>
<td>1156.85</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Die grundsätzliche Vorgehensweise ändert sich im Vergleich zu oben nicht. Zunächst erfolgt eine Umrechnung der Kursreihen in diskrete Monatsrenditen, die als Überschussrenditen über den risiklosen Zins formuliert werden.</p>
<div id="cell-38" class="cell" data-execution_count="19">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1"></a><span class="co"># calculation based on discrete returns</span></span>
<span id="cb20-2"><a href="#cb20-2"></a>returns <span class="op">=</span> frame1.pct_change().dropna()</span>
<span id="cb20-3"><a href="#cb20-3"></a></span>
<span id="cb20-4"><a href="#cb20-4"></a>rf <span class="op">=</span> (<span class="dv">1</span><span class="op">+</span><span class="fl">0.04</span>)<span class="op">**</span>(<span class="dv">1</span><span class="op">/</span><span class="dv">12</span>)<span class="op">-</span><span class="dv">1</span> <span class="co"># risk-free rate assumed 4% p.a.</span></span>
<span id="cb20-5"><a href="#cb20-5"></a>ex_returns <span class="op">=</span> returns <span class="op">-</span> rf</span>
<span id="cb20-6"><a href="#cb20-6"></a></span>
<span id="cb20-7"><a href="#cb20-7"></a><span class="co"># important: we use only the first 60 returns!</span></span>
<span id="cb20-8"><a href="#cb20-8"></a>means <span class="op">=</span> ex_returns.iloc[:<span class="dv">60</span>,:].mean().values<span class="op">*</span><span class="dv">100</span><span class="op">*</span><span class="dv">12</span> <span class="co"># annualised!</span></span>
<span id="cb20-9"><a href="#cb20-9"></a>Sigma <span class="op">=</span> ex_returns.iloc[:<span class="dv">60</span>,:].cov().values <span class="co"># non-annualised!</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>Diese bilden die Ausgangsbasis für eine historisch basierte Schätzung der Alpha- und Beta-Parameter, welche mittels univariater linearer Regression der jeweiligen Assetrenditen auf die Benchmarkrendite ermittelt werden.</p>
<div id="cell-40" class="cell" data-execution_count="20">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1"></a><span class="co"># calculating vectors of alphas and betas</span></span>
<span id="cb21-2"><a href="#cb21-2"></a>alpha <span class="op">=</span> np.zeros(ex_returns.columns.shape)</span>
<span id="cb21-3"><a href="#cb21-3"></a>beta <span class="op">=</span> np.zeros(ex_returns.columns.shape)</span>
<span id="cb21-4"><a href="#cb21-4"></a></span>
<span id="cb21-5"><a href="#cb21-5"></a>x1 <span class="op">=</span> ex_returns[<span class="st">'S&amp;P500'</span>]</span>
<span id="cb21-6"><a href="#cb21-6"></a>x2 <span class="op">=</span> sm2.add_constant(x1)</span>
<span id="cb21-7"><a href="#cb21-7"></a></span>
<span id="cb21-8"><a href="#cb21-8"></a><span class="cf">for</span> idx, ticker <span class="kw">in</span> <span class="bu">enumerate</span>(ex_returns.columns):</span>
<span id="cb21-9"><a href="#cb21-9"></a>    reg <span class="op">=</span> sm.OLS(ex_returns[ticker].iloc[:<span class="dv">60</span>], x2.iloc[:<span class="dv">60</span>]).fit()</span>
<span id="cb21-10"><a href="#cb21-10"></a>    parameter <span class="op">=</span> np.asarray(reg.params)</span>
<span id="cb21-11"><a href="#cb21-11"></a>    alpha[idx] <span class="op">=</span> parameter[<span class="dv">0</span>]</span>
<span id="cb21-12"><a href="#cb21-12"></a>    beta[idx] <span class="op">=</span> parameter[<span class="dv">1</span>]</span>
<span id="cb21-13"><a href="#cb21-13"></a>df <span class="op">=</span>pd.DataFrame({<span class="st">'Alpha'</span>: alpha, <span class="st">'Beta'</span>: beta}, index<span class="op">=</span>ex_returns.columns)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div id="cell-41" class="cell" data-execution_count="21">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1"></a>df</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="21">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Alpha</th>
<th data-quarto-table-cell-role="th">Beta</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">COST</th>
<td>5.317110e-03</td>
<td>0.793253</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">CSCO</th>
<td>7.774840e-03</td>
<td>1.208840</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">IBM</th>
<td>6.029992e-03</td>
<td>0.798688</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">INTC</th>
<td>1.309308e-03</td>
<td>1.161773</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">MRK</th>
<td>5.708572e-03</td>
<td>0.916956</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">MSFT</th>
<td>4.811190e-03</td>
<td>0.959172</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">T</th>
<td>1.748128e-03</td>
<td>0.684994</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">XOM</th>
<td>6.592676e-03</td>
<td>0.465999</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">S&amp;P500</th>
<td>-8.673617e-19</td>
<td>1.000000</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-42" class="cell" data-execution_count="22">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1"></a>alpha <span class="op">=</span> np.matrix(alpha)</span>
<span id="cb23-2"><a href="#cb23-2"></a>beta <span class="op">=</span> np.matrix(beta)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>Die Formulierung des relativen Optimierungsansatzes und die Bestimmung des aktiven Portfolios erfolgt wie bisher. Die Modifikation der Fallstudie liegt in der Wahl unterschiedlicher Anlageuniversen. Ein genereller Lösungsansatz zum Umgang mit unterschiedlichen Anlageuniversen besteht darin, bei zwei gegebenen Portfolios <span class="math inline">\(P\)</span> und <span class="math inline">\(B\)</span> mit Anlageuniversen <span class="math inline">\(X\)</span> und <span class="math inline">\(Y\)</span> ein gemeinsames Anlageuniversum <span class="math inline">\(Z\)</span> als Vereinigungsmenge von <span class="math inline">\(X\)</span> und <span class="math inline">\(Y\)</span>, d.h. <span class="math inline">\(Z=X \cup Y\)</span>, zu bilden. Damit sind die Anlagen beider Portfolios <span class="math inline">\(P\)</span> und <span class="math inline">\(B\)</span> nun Elemente des identischen Anlageuniversums <span class="math inline">\(Z\)</span>. Assets, die in <span class="math inline">\(P\)</span>, aber nicht in <span class="math inline">\(B\)</span> gehalten werden, haben in <span class="math inline">\(B\)</span> ein fixiertes Gewicht von null und entsprechend erhalten Assets, die in <span class="math inline">\(B\)</span>, aber nicht in <span class="math inline">\(P\)</span> gehalten werden, in <span class="math inline">\(P\)</span> ein fixiertes Gewicht von null.</p>
<p>Das Anlageuniversum in der Fallstudie hat nunmehr neun Assets, nämlich die betrachteten acht Einzeltitel sowie den S&amp;P500 als “virtuelle” Anlage. Die historisch basierte Berechnung von <span class="math inline">\(\mu\)</span>, <span class="math inline">\(\Sigma\)</span>, <span class="math inline">\(\alpha\)</span>, und <span class="math inline">\(\beta\)</span> erfolgte oben bereits für diese neun Anlagen.</p>
<p>Im nächsten Schritt muss der Vektor der Benchmark-Gewichte derart ausgestaltet sein, dass die ersten acht Gewichte (für die Einzeltitel) den Wert null und das letzte Gewicht (für den S&amp;P500) den Wert eins zugewiesen bekommen.</p>
<div id="cell-44" class="cell" data-execution_count="23">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1"></a><span class="co"># calculation of weight vector for active portfolio and benchmark</span></span>
<span id="cb24-2"><a href="#cb24-2"></a><span class="co"># using S&amp;P500 as a benchmark implies that all benchmark weights (first N-1)</span></span>
<span id="cb24-3"><a href="#cb24-3"></a><span class="co"># elements are zero and 1 for S&amp;P500 (last element)</span></span>
<span id="cb24-4"><a href="#cb24-4"></a>bench_w <span class="op">=</span> np.zeros(means.shape)</span>
<span id="cb24-5"><a href="#cb24-5"></a>bench_w[<span class="op">-</span><span class="dv">1</span>]<span class="op">=</span><span class="fl">1.0</span></span>
<span id="cb24-6"><a href="#cb24-6"></a>bench_w <span class="op">=</span> np.matrix(bench_w)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>Zudem muss der Vektor der Startgewichte für das aktive Portfolio jeweils den Wert <span class="math inline">\(1/8\)</span> (<code>1/(means.shape[0]-1)</code>) auf den ersten acht Positionen enthalten, und den Wert null auf der letzten Position.</p>
<div id="cell-46" class="cell" data-execution_count="24">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1"></a><span class="co"># vector of starting weights is equally-weighted for the first N-1 </span></span>
<span id="cb25-2"><a href="#cb25-2"></a><span class="co"># elements and zero for the last element</span></span>
<span id="cb25-3"><a href="#cb25-3"></a>Weight_start <span class="op">=</span> np.zeros(means.shape)</span>
<span id="cb25-4"><a href="#cb25-4"></a>Weight_start[<span class="dv">0</span>:<span class="op">-</span><span class="dv">1</span>]<span class="op">=</span><span class="dv">1</span><span class="op">/</span>(means.shape[<span class="dv">0</span>]<span class="op">-</span><span class="dv">1</span>)</span>
<span id="cb25-5"><a href="#cb25-5"></a>Weight_start <span class="op">=</span> np.matrix(Weight_start)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>Die Definition der Zielfunktion <code>relative_opt1</code> bleibt unverändert. Ebenso das Tuple <code>cons</code> der Nebenbedingungen.</p>
<p>Beachten Sie, dass nur die ersten acht Gewichte in <span class="math inline">\(w_P\)</span> die änderbaren Parameter der Optimierung darstellen, das neunte Gewicht in <span class="math inline">\(w_P\)</span> (für den S&amp;P500) ist fest auf null fixiert und nicht Gegenstand der Optimierung. Dieses Prinzip gilt immer für alle Gewichte in <span class="math inline">\(P\)</span>, die explizit auf null gesetzt und fixiert werden, weil die zugehörigen Anlagen nicht Elemente des Anlageuniversums von <span class="math inline">\(P\)</span> sind.</p>
<p>Wir implementieren die Nullgewichtung der Benchmark in <span class="math inline">\(w_p\)</span> über das Tuple <code>bounds</code> der Bestandsgrenzen indem wir <code>bounds += ((0.0, 1e-10), )</code> setzen. Hierdurch fügen wir am Ende von <code>bounds</code> ein weiteres Tuple der Form <code>(0.0, 1e-10)</code> hinzu. <strong>Wichtig:</strong> die Obergrenze des Tuples muss zwingend größer sein als die Untergenze (daher die Wahl von 1e-10). Dies hat aber keinen Einfluss auf die Optimierungsergebnisse.</p>
<p>Mit <span class="math inline">\(\lambda=-0.1075445\)</span> ergibt sich der folgende optimierte Anteilsvektor.</p>
<div id="cell-48" class="cell" data-execution_count="25">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1"></a>bound <span class="op">=</span> (<span class="fl">0.05</span>,<span class="fl">0.40</span>)</span>
<span id="cb26-2"><a href="#cb26-2"></a>bounds <span class="op">=</span> <span class="bu">tuple</span>(bound <span class="cf">for</span> asset <span class="kw">in</span> <span class="bu">range</span>(alpha.shape[<span class="dv">1</span>]<span class="op">-</span><span class="dv">1</span>))</span>
<span id="cb26-3"><a href="#cb26-3"></a><span class="co"># weight of the benchmark is fixed to zero; Important: lb==ub is no longer allowed!</span></span>
<span id="cb26-4"><a href="#cb26-4"></a>bounds <span class="op">+=</span> ((<span class="fl">0.0</span>, <span class="fl">1e-10</span>), ) </span>
<span id="cb26-5"><a href="#cb26-5"></a>lambda0 <span class="op">=</span> <span class="op">-</span><span class="fl">0.1075445</span></span>
<span id="cb26-6"><a href="#cb26-6"></a></span>
<span id="cb26-7"><a href="#cb26-7"></a>cons <span class="op">=</span> ({<span class="st">'type'</span>: <span class="st">'eq'</span>, <span class="st">'fun'</span>: <span class="kw">lambda</span> x: np.<span class="bu">sum</span>(x) <span class="op">-</span> <span class="dv">1</span>},</span>
<span id="cb26-8"><a href="#cb26-8"></a>        {<span class="st">'type'</span>: <span class="st">'eq'</span>, <span class="st">'fun'</span>: <span class="kw">lambda</span> x: (np.matrix(x)<span class="op">*</span>beta.T)[<span class="dv">0</span>,<span class="dv">0</span>] <span class="op">-</span> <span class="dv">1</span>})</span>
<span id="cb26-9"><a href="#cb26-9"></a></span>
<span id="cb26-10"><a href="#cb26-10"></a>res1 <span class="op">=</span> minimize(relative_opt1, Weight_start, args<span class="op">=</span>lambda0,</span>
<span id="cb26-11"><a href="#cb26-11"></a>                        method<span class="op">=</span><span class="st">'SLSQP'</span>, bounds<span class="op">=</span>bounds, constraints<span class="op">=</span>cons,tol<span class="op">=</span><span class="fl">1e-10</span>)</span>
<span id="cb26-12"><a href="#cb26-12"></a>pd.DataFrame([<span class="bu">round</span>(x,<span class="dv">4</span>) <span class="cf">for</span> x <span class="kw">in</span> res1.x],index<span class="op">=</span>ex_returns.columns).T</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="25">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">COST</th>
<th data-quarto-table-cell-role="th">CSCO</th>
<th data-quarto-table-cell-role="th">IBM</th>
<th data-quarto-table-cell-role="th">INTC</th>
<th data-quarto-table-cell-role="th">MRK</th>
<th data-quarto-table-cell-role="th">MSFT</th>
<th data-quarto-table-cell-role="th">T</th>
<th data-quarto-table-cell-role="th">XOM</th>
<th data-quarto-table-cell-role="th">S&amp;P500</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>0.05</td>
<td>0.4</td>
<td>0.05</td>
<td>0.05</td>
<td>0.296</td>
<td>0.05</td>
<td>0.05</td>
<td>0.054</td>
<td>0.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Kurzer Check ob Timing Bedingung (Portfolio-Beta gleich eins, aktives Beta gleich null) eingehalten wird.</p>
<div id="cell-50" class="cell" data-execution_count="26">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1"></a>port_beta(res1.x,beta)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="26">
<pre><code>1.0000000000585922</code></pre>
</div>
</div>
<div id="cell-51" class="cell" data-execution_count="27">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1"></a><span class="co"># portfolio variance</span></span>
<span id="cb29-2"><a href="#cb29-2"></a>(np.matrix(res1.x)<span class="op">*</span> Sigma<span class="op">*</span> np.matrix(res1.x).T)[<span class="dv">0</span>,<span class="dv">0</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="27">
<pre><code>0.0030267295902247117</code></pre>
</div>
</div>
<div id="cell-52" class="cell" data-execution_count="28">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1"></a><span class="co"># portfolio alpha</span></span>
<span id="cb31-2"><a href="#cb31-2"></a>(np.matrix(res1.x)<span class="op">*</span>alpha.T)[<span class="dv">0</span>,<span class="dv">0</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="28">
<pre><code>0.006116489277362495</code></pre>
</div>
</div>
</section>
</section>
<section id="lernvideos" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="lernvideos"><span class="header-section-number">3.5</span> Lernvideos</h2>
<section id="video-teil-1" class="level3" data-number="3.5.1">
<h3 data-number="3.5.1" class="anchored" data-anchor-id="video-teil-1"><span class="header-section-number">3.5.1</span> Video Teil 1</h3>
<p><a href="https://www.youtube.com/watch?v=8gcP3vI5GmU"><img src="https://img.youtube.com/vi/8gcP3vI5GmU/0.jpg" class="img-fluid"></a></p>
</section>
<section id="video-teil-2" class="level3" data-number="3.5.2">
<h3 data-number="3.5.2" class="anchored" data-anchor-id="video-teil-2"><span class="header-section-number">3.5.2</span> Video Teil 2</h3>
<p><a href="https://www.youtube.com/watch?v=QNouVO-Mp7M"><img src="https://img.youtube.com/vi/QNouVO-Mp7M/0.jpg" class="img-fluid"></a></p>
</section>
</section>
<section id="literatur" class="level2" data-number="3.6">
<h2 data-number="3.6" class="anchored" data-anchor-id="literatur"><span class="header-section-number">3.6</span> Literatur</h2>
<p>Drobetz, W. (2003). Einsatz des Black-Litterman-Verfahrens in der Asset Allocation, in: Dichtl, H., Kleeberg, J., und C. Schlenger (Hrsg.), Handbuch Asset Allocation, Uhlenbruch Verlag: Bad Soden/Ts.</p>
<p>Grinold, R. C., Kahn, R. N. (2000). Active Portfoliomanagement, Quantitative Theory and Applications, 2. Auflage, New York u.a..</p>
<p>Poddig, T., Brinkmann, U., Seiler, K. (2009). Portfolio Management: Konzepte und Strategien, 2. Auflage, Uhlenbruch Verlag, Bad Soden/Ts..</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./kapitel1a.html" class="pagination-link" aria-label="Grundlagen der klassischen (absoluten) Portfoliooptimierung">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Grundlagen der klassischen (absoluten) Portfoliooptimierung</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./kapitel3a.html" class="pagination-link" aria-label="Schätzrisiken in der Portfoliotheorie">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Schätzrisiken in der Portfoliotheorie</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<script src="site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>