<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>5&nbsp; Verbesserte Schätzung der Inputparameter: Geschrumpfte Schätzer – Grundlagen des quantitativen Portfoliomanagements mit Python</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2" crossorigin="anonymous"></script><script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./kapitel5a.html" rel="next">
<link href="./kapitel3a.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-707d8167ce6003fca903bfe2be84ab7f.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-e0fdce12ac1367d4b47c179a2935dd10.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark-74c88ba48ad0bebf983f0ffd06dd1671.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="site_libs/bootstrap/bootstrap-e0fdce12ac1367d4b47c179a2935dd10.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>
<script src="https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js" integrity="sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar floating quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const darkModeDefault = authorPrefersDark;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./kapitel4a.html"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Verbesserte Schätzung der Inputparameter: Geschrumpfte Schätzer</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="./index.html" class="sidebar-logo-link">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Grundlagen des quantitativen Portfoliomanagements mit Python</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Willkommen zu „Grundlagen des quantitativen Portfoliomanagements mit Python“</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./kapitel1a.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Grundlagen der klassischen (absoluten) Portfoliooptimierung</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./kapitel2a.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Relative Portfoliooptimierung</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./kapitel3a.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Schätzrisiken in der Portfoliotheorie</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./kapitel4a.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Verbesserte Schätzung der Inputparameter: Geschrumpfte Schätzer</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./kapitel5a.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Das Black-Litterman Modell</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./kapitel6a.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Berücksichtigung des Schätzrisikos: Portfolio-Resampling</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./kapitel7a.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Risikogesteuerte Ansätze: Verzicht auf die Schätzung der erwarteten Rendite</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./kapitel8a.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Index Tracking</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./projekt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Abschlußprojekt</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#einleitung" id="toc-einleitung" class="nav-link active" data-scroll-target="#einleitung"><span class="header-section-number">5.1</span> Einleitung</a></li>
  <li><a href="#james-stein-schätzer-für-mu" id="toc-james-stein-schätzer-für-mu" class="nav-link" data-scroll-target="#james-stein-schätzer-für-mu"><span class="header-section-number">5.2</span> James-Stein Schätzer für <span class="math inline">\(\mu\)</span></a></li>
  <li><a href="#bayes-stein-schätzer-für-mu" id="toc-bayes-stein-schätzer-für-mu" class="nav-link" data-scroll-target="#bayes-stein-schätzer-für-mu"><span class="header-section-number">5.3</span> Bayes-Stein Schätzer für <span class="math inline">\(\mu\)</span></a></li>
  <li><a href="#ledoit-wolf-schätzer-für-sigma" id="toc-ledoit-wolf-schätzer-für-sigma" class="nav-link" data-scroll-target="#ledoit-wolf-schätzer-für-sigma"><span class="header-section-number">5.4</span> Ledoit-Wolf Schätzer für <span class="math inline">\(\Sigma\)</span></a></li>
  <li><a href="#beginn-der-fallstudie" id="toc-beginn-der-fallstudie" class="nav-link" data-scroll-target="#beginn-der-fallstudie"><span class="header-section-number">5.5</span> Beginn der Fallstudie</a>
  <ul class="collapse">
  <li><a href="#laden-und-beschreiben-der-datenbasis" id="toc-laden-und-beschreiben-der-datenbasis" class="nav-link" data-scroll-target="#laden-und-beschreiben-der-datenbasis"><span class="header-section-number">5.5.1</span> Laden und Beschreiben der Datenbasis</a></li>
  <li><a href="#james-stein-schätzer" id="toc-james-stein-schätzer" class="nav-link" data-scroll-target="#james-stein-schätzer"><span class="header-section-number">5.5.2</span> James-Stein Schätzer</a></li>
  <li><a href="#bayes-stein-schätzer" id="toc-bayes-stein-schätzer" class="nav-link" data-scroll-target="#bayes-stein-schätzer"><span class="header-section-number">5.5.3</span> Bayes-Stein Schätzer</a></li>
  <li><a href="#ledoit-wolf-schätzer-der-varianz-kovarianzmatrix" id="toc-ledoit-wolf-schätzer-der-varianz-kovarianzmatrix" class="nav-link" data-scroll-target="#ledoit-wolf-schätzer-der-varianz-kovarianzmatrix"><span class="header-section-number">5.5.4</span> Ledoit-Wolf Schätzer der Varianz-Kovarianzmatrix</a></li>
  <li><a href="#vergleich-der-effizienzkurven-und-portfolioallokationen" id="toc-vergleich-der-effizienzkurven-und-portfolioallokationen" class="nav-link" data-scroll-target="#vergleich-der-effizienzkurven-und-portfolioallokationen"><span class="header-section-number">5.5.5</span> Vergleich der Effizienzkurven und Portfolioallokationen</a></li>
  </ul></li>
  <li><a href="#lernvideos" id="toc-lernvideos" class="nav-link" data-scroll-target="#lernvideos"><span class="header-section-number">5.6</span> Lernvideos</a>
  <ul class="collapse">
  <li><a href="#video-teil-1" id="toc-video-teil-1" class="nav-link" data-scroll-target="#video-teil-1"><span class="header-section-number">5.6.1</span> Video Teil 1</a></li>
  <li><a href="#video-teil-2" id="toc-video-teil-2" class="nav-link" data-scroll-target="#video-teil-2"><span class="header-section-number">5.6.2</span> Video Teil 2</a></li>
  </ul></li>
  <li><a href="#literatur" id="toc-literatur" class="nav-link" data-scroll-target="#literatur"><span class="header-section-number">5.7</span> Literatur</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">


<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Verbesserte Schätzung der Inputparameter: Geschrumpfte Schätzer</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="einleitung" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="einleitung"><span class="header-section-number">5.1</span> Einleitung</h2>
<p>Eine naheliegende Herangehensweise zur Adressierung der Schätzfehlerproblematik befasst sich mit dem in der ursprünglichen Studie von Markowitz unberücksichtigten Schritt der Bestimmung von verbesserten Schätzern für die Inputparameter <span class="math inline">\(\mu\)</span> und <span class="math inline">\(\Sigma\)</span>. Dabei besteht die grundlegende Problematik darin, dass es sich bei den Annahmen über die zukünftigen Werte dieser Parameter stets um Schätzungen handelt und diese folglich mit Unsicherheit behaftet sind. Das Ziel bei der Entwicklung optimierter Schätzverfahren ist es folglich, die Auswirkungen der Schätzfehlerproblematiken durch eine verbesserte Schätzung der Parameter zu reduzieren.</p>
<p>Auf den ersten Blick erscheint es überraschend, dass es möglich ist, einen besseren Schätzer für <span class="math inline">\(\mu\)</span> als das arithmetische Mittel zu finden, da letzteres doch bei normalverteilten Renditen den besten unverzerrten Schätzer darstellt. Trotzdem bietet sich Verbesserungspotential, indem man - anders als beim arithmetischen Mittel - für die Schätzung der erwarteten Rendite von Aktie i nicht nur Zeitreiheninformationen bezüglich der Aktie i verwendet, sondern auch Informationen aus sonstigen Aktien. Ökonomisch ist dieses Verbesserungspotential nicht überraschend: Das arithmetische Mittel schätzt beispielsweise die erwartete Rendite von BASF lediglich aus den vergangenen Renditen von BASF, während z.B. die sogenannten <strong>geschrumpften Schätzer</strong> zusätzlich noch Informationen aus der Zeitreihe der Bayer-Aktie verwenden. Im Ergebnis erhält man hierdurch einen Vektor für erwartete Renditen, der sich als gewogenes Mittel der arithmetischen Mittelwerte und einem exogenen Schätzwert (sog. Prior) berechnet. Im Kern werden so die ursprünglich mit Unsicherheit behafteten einfachen historisch basierten Schätzwerte an einen vordefinierten Prior angepasst.</p>
<p>Die folgenden Abschnitte stellen die drei bekanntesten geschrumpften Schätzer im Rahmen der Portfoliooptimerung vor: den James-Stein Schätzer und den Bayes-Stein Schätzer für den Vektor der zukünftigen erwarteten Renditen <span class="math inline">\(\mu\)</span>, und den Ledoit-Wolf Schätzer für die zukünftige Varianz-Kovarianzmatrix <span class="math inline">\(\Sigma\)</span>.</p>
</section>
<section id="james-stein-schätzer-für-mu" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="james-stein-schätzer-für-mu"><span class="header-section-number">5.2</span> James-Stein Schätzer für <span class="math inline">\(\mu\)</span></h2>
<p>Bei der Schätzung des Erwartungswerts nach der Methode von James und Stein (1961) wird dabei als Prior der durchschnittliche Renditemittelwert aller Wertpapiere in der Stichprobe herangezogen (dieser wird im Englischen auch als “Grand-Mean” bezeichnet). Die einzelnen Mittelwerte werden im Ausmass des eruierten Schrumpfungsfaktors <span class="math inline">\(\hat{w}\)</span> in die Richtung dieses Grand-Mean angepasst, respektive geschrumpft. Je weiter die individuellen Stichprobenmittelwerte vom durchschnittlichen Mittelwert entfernt sind, desto grösser ist das Ausmass der Schrumpfung. Durch diesen Prozess kann der Einfluss von Extremwerten in der Stichprobe reduziert werden, wodurch die Robustheit des Schätzers optimiert und folglich auch die Sensitivität des Portfolios reduziert werden kann. Die Darstellung der mathematischen Konzeption des Schätzers erfolgt im Wesentlichen anhand von Jorion (1986, S. 283 ff.).</p>
<p>Die Formel für den James-Stein Schätzer definiert sich wie folgt:</p>
<p><span class="math display">\[ (1) \quad \hat{\mu}_{JS}=(1-\hat{w})Y+\hat{w}Y_0\iota .\]</span></p>
<p>Dabei stellt <span class="math inline">\(\iota\)</span> den Einheitsvektor der Dimension <span class="math inline">\(Nx1\)</span> dar und <span class="math inline">\(Y^T=(\bar{r}_1, ..., \bar{r}_N)\)</span> den Zeilenvektor der <span class="math inline">\(N\)</span> historischen Renditemittelwerte. <span class="math inline">\(\bar{r}_i\)</span> bezeichnet den Mittelwert (im Zeitpunkt <span class="math inline">\(t\)</span>) der Renditen von Wertpapier <span class="math inline">\(i\)</span> auf Basis einer Zeitreihe mit <span class="math inline">\(k\)</span> Beobachtungen:</p>
<p><span class="math display">\[ (2) \quad \bar{r}_i=\frac{1}{k}\sum_{j=t-k}^{t}r_{i,j}  .\]</span></p>
<p>Der als Prior festgelegte Wert in der Form des Grand-Mean ergibt sich aus:</p>
<p><span class="math display">\[ (3) \quad Y_0=\frac{1}{N}\sum_{i}^{N}\bar{r}_{i} . \]</span></p>
<p>Der Schrumpfungsfaktor <span class="math inline">\(\hat{w}\)</span> lässt sich wie folgt berechnen:</p>
<p><span class="math display">\[ (4) \quad \hat{w}=\min(1, \frac{N-2}{k(Y-Y_0\iota)^T\Sigma^{-1}(Y-Y_0\iota)}). \]</span></p>
<p>Der Schrumpfungsfaktor umfasst einen Bereich von null bis eins. Es gilt: Je mehr sich der Wert des Gewichts <span class="math inline">\(\hat{w}\)</span> an den Wert 1 annähert, umso mehr werden die Stichprobenmittelwerte in Richtung der durchschnittlichen Rendite aller Wertpapiere geschrumpft. Gleichung (4) macht deutlich, dass der Schrumpfungsfaktor von der gesamten Anzahl (<span class="math inline">\(k\)</span>) an Beobachtungen im Schätzzeitraum, der Anzahl (<span class="math inline">\(N\)</span>) der Wertpapiere, der Varianz-Kovarianzmatrix <span class="math inline">\(\Sigma\)</span> sowie dem Abstand zwischen den individuellen durchschnittlichen historischen Renditen der Wertpapiere und der durchschnittlichen Rendite aller Wertpapiere abhängt.</p>
<p>Der Gewichtungsfaktor <span class="math inline">\(\hat{w}\)</span> bestimmt, wie stark Zeitreiheninformationen und eine exogene Information die Schätzung für die erwarteten Renditen beeinflussen. Bei einem langen Beobachtungszeitraum (<span class="math inline">\(k\)</span> groß) werden die Informationen aus der Zeitreihe hoch gewichtet, d.h. <span class="math inline">\(\hat{w}\)</span> ist klein. Dagegen steigt der Einfluss des Vorwissens, falls die wahren erwarteten Renditen eng um den (einheitlichen) Schätzwert <span class="math inline">\(Y_0\)</span> liegen. Aus (1) wird klar, dass die Verbesserung der Schätzung aus der Berücksichtigung des Priors resultiert. Der Ansatz von James und Stein verhindert somit extreme Schätzwerte für erwartete Renditen durch eine implizite Glättung mittels des Prior.</p>
</section>
<section id="bayes-stein-schätzer-für-mu" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="bayes-stein-schätzer-für-mu"><span class="header-section-number">5.3</span> Bayes-Stein Schätzer für <span class="math inline">\(\mu\)</span></h2>
<p>Als eine weitere Methode im Bereich der geschrumpften Schätzer entwickelte Jorion (1986) den Bayes-Stein Schätzer, welcher ebenfalls die Schrumpfung der einzelnen Stichprobenmittelwerte in Richtung eines globalen Mittelwerts anstrebt. Im Unterschied zum James-Stein Schätzer wird hier allerdings die erwartete Rendite des <em>Minimum Varianz Portfolios (MVP)</em> als globaler Mittelwert angenommen, wohingegen der Prozess der Schrumpfung mit demjenigen des James-Stein Schätzers kongruent ist. Begründet werden kann die Wahl des MVP damit, dass bei der Bestimmung der Gewichte des MVP keine Annahmen bezüglich der erwarteten Renditen in die Berechnung einfliessen und diese somit nur von den Werten der Varianz-Kovarianzmatrix abhängig sind. Falls nur die Budgetrestriktion als Nebenbedingung bei der Optimierung Berücksichtigung findet, läßt sich der Gewichtsvektor des MVP analytisch bestimmen (vgl. z.B. Franzen und Schäfer, 2018, S. 188 f.):</p>
<p><span class="math display">\[ (5) \quad w_{MVP}=\frac{\iota^T\Sigma^{-1}}{\iota^T\Sigma^{-1}\iota}. \]</span></p>
<p>Unter der Annahme, dass Schätzfehler in Bezug auf die Risikoterme (Varianzen und Kovarianzen) vernachlässigt werden können, wird das MVP somit weniger stark von Schätzfehlern beeinflusst. Für die erwartete Rendite des MVP als Prior folgt somit (mit <span class="math inline">\(Y\)</span> als <span class="math inline">\(Nx1\)</span> Spaltenvektor der empirischen Renditemittelwerte):</p>
<p><span class="math display">\[ (6) \quad \hat{\mu}_{MVP}=w_{MVP}Y=\frac{\iota^T\Sigma^{-1}Y}{\iota^T\Sigma^{-1}\iota}. \]</span></p>
<p>Der Bayes-Stein Schätzer ergibt sich aus:</p>
<p><span class="math display">\[ (7) \quad \hat{\mu}_{BS}=(1-\hat{w})Y+\hat{w}\hat{\mu}_{MVP}\iota . \]</span></p>
<p>Der Schrumpfungsfaktor, mit welchem die einzelnen empirischen Renditen in Richtung der Rendite des MVP angepasst werden, ist definiert durch:</p>
<p><span class="math display">\[ (8) \quad \hat{w}=\frac{N+2}{(N+2)+k(Y-\hat{\mu}_{MVP}\iota)^T\Sigma^{-1}(Y-\hat{\mu}_{MVP}\iota)}, \]</span></p>
<p>mit <span class="math inline">\(N\)</span> als Zahl der im Portfolio enthaltenen Wertpapiere sowie <span class="math inline">\(k\)</span> als Anzahl Perioden in der Stichprobe. Zusätzlich zur Anpassung der erwarteten Renditen wird aufgrund des Umstands, dass das wahre <span class="math inline">\(\Sigma\)</span> unbekannt ist, eine Anpassung der Schätzung der Varianz-Kovarianzmatrix nach Zellner und Chetty (1965) vorgeschlagen, mit <span class="math inline">\(\hat{\Sigma}\)</span> als die empirisch geschätzte Varianz-Kovarianzmatrix (Jorion, 1986, S. 286):</p>
<p><span class="math display">\[ (9) \quad \hat{\Sigma}_{ZC}=\frac{k-1}{k-N-2}\hat{\Sigma} . \]</span></p>
<p>Mit der Absicht, die Auswirkungen der Schätzfehlerproblematik im Rahmen der Portfolioauswahl zu untersuchen, stellte Jorion (1985) in einer früheren Studie bereits fest, dass die geschrumpften Schätzer die konventionellen empirischen Mittelwerte in Bezug auf die out-of-sample Performance dominieren. In der Folge konnte Jorion (1986) zusätzlich die Überlegenheit des Bayes-Stein Schätzers, verglichen mit dem klassischen Ansatz, belegen.</p>
</section>
<section id="ledoit-wolf-schätzer-für-sigma" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="ledoit-wolf-schätzer-für-sigma"><span class="header-section-number">5.4</span> Ledoit-Wolf Schätzer für <span class="math inline">\(\Sigma\)</span></h2>
<p>Ledoit und Wolf (2003) greifen die Problematik der Schätzung von Varianz-Kovarianzmatrizen aus einer Stichprobe auf und schlagen eine Schrumpfung der empirischen Varianz-Kovarianzmatrix in Richtung einer Matrix mit einer festen Struktur vor. Da die Anzahl der zu schätzenden Kovarianzen quadratisch mit der Anzahl <span class="math inline">\(N\)</span> der Wertpapiere steigt (es gilt: Anzahl Kovarianzen <span class="math inline">\(=0,5\cdot N(N-1)\)</span>), gewinnt die Schätzfehlerproblematik bei der Bestimmung der Varianz-Kovarianzmatrix für große Portfolios an Bedeutung.</p>
<p>Das grundlegende Prinzip bei der Schrumpfung der Varianz-Kovarianzmatrix umfasst die Kombination der folgenden Elemente:</p>
<ul>
<li>empirische Varianz-Kovarianzmatrix <span class="math inline">\(\hat{\Sigma}\)</span> aus der Stichprobe ohne feste Struktur</li>
<li>Schrumpfungsfaktor <span class="math inline">\(\hat{w}\)</span></li>
<li>Varianz-Kovarianzmatrix mit einer festen Struktur <span class="math inline">\(\hat{\Sigma}_{cc}\)</span></li>
</ul>
<p>Durch eine konvex-lineare Kombination (über den Schrumpfungsfaktor) der beiden Matrizen entsteht ein Kompromiss zwischen der Varianz-Kovarianzmatrix aus der Stichprobe <span class="math inline">\(\hat{\Sigma}\)</span> und einer vorgegebenen festen Struktur <span class="math inline">\(\hat{\Sigma}_{cc}\)</span>, dem Schrumpfungsziel. Dabei sollte das Schrumpfungsziel zwei wesentliche Kriterien gleichermaßen erfüllen: Einerseits sollte es nur eine geringe Anzahl an freien Parametern besitzen, so dass eine feste Struktur des Schätzers entsteht, und andererseits sollte es wichtige Merkmale der unbekannten zu schätzenden Parameter berücksichtigen. Ledoit und Wolf (2003) schlagen bei der Festlegung der Varianz-Kovarianzmatrix <span class="math inline">\(\hat{\Sigma}_{cc}\)</span> entweder die Ermittlung von Renditekorrelationen auf Basis des <strong>Einfaktormodells</strong> von Sharpe (1963) oder die Annahme <strong>konstanter paarweiser Korrelationen</strong> vor. Da der letztgenannte Vorschlag bei in der Regel vergleichbaren Ergebnissen einfacher zu implementieren ist, soll er auch im Folgenden zur Bestimmung von <span class="math inline">\(\hat{\Sigma}_{cc}\)</span> verwendet werden.</p>
<p>Die zuvor angesprochene konvex-lineare Kombination der beiden Matrizen ergibt sich wie folgt:</p>
<p><span class="math display">\[ (10) \quad \hat{\Sigma}_{LW}=\hat{w}\hat{\Sigma}_{cc}+(1-\hat{w})\hat{\Sigma},\]</span></p>
<p>wobei <span class="math inline">\(\hat{\Sigma}\)</span> die Varianz-Kovarianzmatrix der Stichprobe darstellt und <span class="math inline">\(\hat{\Sigma}_{cc}\)</span> die Varianz-Kovarianzmatrix der Stichprobe unter der Annahme einer konstanten Korrelation (<em>constant correlation</em> - cc).</p>
<p>Die Berechnung der zuletzt genannten Varianz-Kovarianzmatrix erfolgt stufenweise. Da sich die Kovarianz <span class="math inline">\(Cov(X,Y)\)</span> zweier Zufallsvariablen <span class="math inline">\(X\)</span> und <span class="math inline">\(Y\)</span> als Produkt der Volatilitäten (<span class="math inline">\(\sigma_X, \sigma_Y\)</span>) und dem Korrelationskoeffizienten <span class="math inline">\(Corr(X,Y)\)</span> schreiben lässt (d.h., <span class="math inline">\(Cov(X,Y)=\sigma_X \cdot \sigma_Y \cdot Corr(X,Y)\)</span>), gilt für die empirische Varianz-Kovarianzmatrix:</p>
<p><span class="math display">\[ (11) \quad \hat{\Sigma}=\Lambda C \Lambda^T, \]</span></p>
<p>wobei <span class="math inline">\(\Lambda\)</span> eine Diagonalmatrix der Renditevolatilitäten und <span class="math inline">\(C\)</span> die Korrelationsmatrix der Stichprobe verkörpert. Mit <span class="math inline">\(\hat{\rho}_{ij}\)</span> als empirischen Korrelationskoeffizienten zwischen den Renditen von Wertpapier <span class="math inline">\(i\)</span> und <span class="math inline">\(j\)</span>, lässt sich <span class="math inline">\(C\)</span> darstellen als:</p>
<p><span class="math display">\[ (12)\quad C=\left( \begin{array}{rrrr}
1 &amp; \hat{\rho}_{12} &amp; \dots &amp; \hat{\rho}_{1N} \\
\hat{\rho}_{21} &amp; \ddots &amp; \ddots &amp; \vdots \\
\vdots &amp; \ddots &amp; \ddots &amp; \hat{\rho}_{N-1N} \\
\hat{\rho}_{N1} &amp; \dots &amp; \hat{\rho}_{NN-1} &amp; 1 \\
\end{array}\right) .\]</span></p>
<p>Zur Berechnung von <span class="math inline">\(\hat{\Sigma}_{cc}\)</span> wird einfach die Korrelationsmatrix aus der Stichprobe durch eine mit konstanten Korrelationen ersetzt</p>
<p><span class="math display">\[ (13)\quad C_{cc}=\left( \begin{array}{rrrr}
1 &amp; \hat{\rho} &amp; \dots &amp; \hat{\rho} \\
\hat{\rho} &amp; \ddots &amp; \ddots &amp; \vdots \\
\vdots &amp; \ddots &amp; \ddots &amp; \hat{\rho} \\
\hat{\rho} &amp; \dots &amp; \hat{\rho} &amp; 1 \\
\end{array}\right) ,\]</span></p>
<p>wobei <span class="math inline">\(\hat{\rho}\)</span> den Durchschnitt aller (<span class="math inline">\(0,5 \cdot N(N-1)\)</span>) Korrelationen aus der Stichprobe umfasst. Es gilt:</p>
<p><span class="math display">\[ (14) \quad \hat{\rho}=\frac{2}{(N-1)N}\sum_{i=1}^N \sum_{j=i+1}^N \hat{\rho}_{ij} . \]</span></p>
<p>Für das Schrumpfungsziel folgt damit: <span class="math inline">\(\hat{\Sigma}_{cc}=\Lambda C_{cc} \Lambda^T\)</span></p>
<p>Die Wahl eines optimalen Schrumpfungsfaktors fällt nach Ledoit und Wolf (2003) auf diejenige Konstante, die den erwarteten Abstand zwischen dem geschrumpften Schätzer und der wahren Varianz-Kovarianzmatrix minimiert. Es kann gezeigt werden, dass sich die optimale Intensität der Schrumpfung proportional zu einer Konstanten <span class="math inline">\(\hat{g}\)</span> dividiert durch den Stichprobenumfang <span class="math inline">\(k\)</span> verhält. Der optimale Schrumpfungsfaktor ergibt sich demnach wie folgt:</p>
<p><span class="math display">\[ (15) \quad \hat{w}= max \left \{0, min \left \{\frac{\hat{g}}{k},1\right \} \right \}. \]</span></p>
<p>Die Berechnung der drei geschrumpften Schätzer und ihre Auswirkungen auf die Zusammensetzung optimaler Portfolios werden im Rahmen der folgenden Fallstudie veranschaulicht.</p>
</section>
<section id="beginn-der-fallstudie" class="level2" data-number="5.5">
<h2 data-number="5.5" class="anchored" data-anchor-id="beginn-der-fallstudie"><span class="header-section-number">5.5</span> Beginn der Fallstudie</h2>
<p>Wir starten mit dem Import der benötigten Pakete.</p>
<div id="cell-5" class="cell" data-execution_count="2">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="im">from</span> scipy.optimize <span class="im">import</span> minimize</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="im">import</span> numpy.linalg <span class="im">as</span> la</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<section id="laden-und-beschreiben-der-datenbasis" class="level3" data-number="5.5.1">
<h3 data-number="5.5.1" class="anchored" data-anchor-id="laden-und-beschreiben-der-datenbasis"><span class="header-section-number">5.5.1</span> Laden und Beschreiben der Datenbasis</h3>
<p>Der verwendete Datensatz enthält Kurshistorien (Monatsanfangskurse) der folgenden zehn Unternehmen: Abbott Laboratories (ABT), Boeing Industries (BA), Costco Wholesale (COST), Cisco Systems (CSCO), IBM (IBM), Intel (INTC), Merk (MRK), Microsoft (MSFT), AT&amp;T (T), und Exxon Mobil Corporation (XOM). Die Kurshistorien beziehen sich auf den Zeitraum <em>12.2004-12.2009</em> (61 Monate).</p>
<div id="cell-7" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1"></a><span class="co"># hier den Dateipfad einfügen!</span></span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="co"># cd "..."</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div id="cell-8" class="cell" data-execution_count="3">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1"></a>frame <span class="op">=</span> pd.read_excel(<span class="st">'Kapitel A1.xlsx'</span>, <span class="st">'Tabelle1'</span>, index_col<span class="op">=</span><span class="dv">0</span>, parse_dates<span class="op">=</span><span class="va">True</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div id="cell-9" class="cell" data-execution_count="4">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1"></a>frame.tail(<span class="dv">6</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="4">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">ABT</th>
<th data-quarto-table-cell-role="th">BA</th>
<th data-quarto-table-cell-role="th">COST</th>
<th data-quarto-table-cell-role="th">CSCO</th>
<th data-quarto-table-cell-role="th">IBM</th>
<th data-quarto-table-cell-role="th">INTC</th>
<th data-quarto-table-cell-role="th">MRK</th>
<th data-quarto-table-cell-role="th">MSFT</th>
<th data-quarto-table-cell-role="th">T</th>
<th data-quarto-table-cell-role="th">XOM</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">2009-07-01</th>
<td>44.99</td>
<td>42.91</td>
<td>49.50</td>
<td>22.01</td>
<td>117.93</td>
<td>19.25</td>
<td>30.01</td>
<td>23.52</td>
<td>26.23</td>
<td>70.39</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2009-08-03</th>
<td>45.23</td>
<td>49.67</td>
<td>50.98</td>
<td>21.60</td>
<td>118.05</td>
<td>20.32</td>
<td>32.43</td>
<td>24.65</td>
<td>26.05</td>
<td>69.15</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2009-09-01</th>
<td>49.47</td>
<td>54.15</td>
<td>56.38</td>
<td>23.54</td>
<td>119.61</td>
<td>19.57</td>
<td>31.63</td>
<td>25.72</td>
<td>27.01</td>
<td>68.61</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2009-10-01</th>
<td>50.57</td>
<td>47.80</td>
<td>56.85</td>
<td>22.81</td>
<td>120.61</td>
<td>19.11</td>
<td>30.93</td>
<td>27.73</td>
<td>25.67</td>
<td>71.67</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2009-11-02</th>
<td>54.49</td>
<td>52.41</td>
<td>59.91</td>
<td>23.40</td>
<td>126.35</td>
<td>19.20</td>
<td>36.21</td>
<td>29.41</td>
<td>26.94</td>
<td>75.07</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2009-12-01</th>
<td>54.48</td>
<td>53.72</td>
<td>60.73</td>
<td>23.92</td>
<td>127.94</td>
<td>19.66</td>
<td>36.88</td>
<td>30.01</td>
<td>27.18</td>
<td>76.04</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Auf Basis von stetigen (log) Renditen werden die historischen Mittelwerte und die Varianz-Kovarianzmatrix der Renditen berechnet und jeweils annualisiert.</p>
<div id="cell-11" class="cell" data-execution_count="5">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1"></a><span class="co"># using log returns</span></span>
<span id="cb5-2"><a href="#cb5-2"></a>log_returns <span class="op">=</span> np.log1p(frame.pct_change().dropna()) </span>
<span id="cb5-3"><a href="#cb5-3"></a>means <span class="op">=</span> log_returns.mean().values<span class="op">*</span><span class="dv">12</span> <span class="co"># annualised</span></span>
<span id="cb5-4"><a href="#cb5-4"></a>Sigma <span class="op">=</span> log_returns.cov().values<span class="op">*</span><span class="dv">12</span> <span class="co"># annualised</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section>
<section id="james-stein-schätzer" class="level3" data-number="5.5.2">
<h3 data-number="5.5.2" class="anchored" data-anchor-id="james-stein-schätzer"><span class="header-section-number">5.5.2</span> James-Stein Schätzer</h3>
<p>Die Berechnung des Grand-Mean <span class="math inline">\(Y_0\)</span>, des Schrumpfungsfaktors <span class="math inline">\(\hat{w}\)</span>, und der James-Stein geschätzten erwarteten Renditen <span class="math inline">\(\hat{\mu}_{JS}\)</span> erfolgt nun anhand der oben präsentierten Formeln (1), (3) und (4).</p>
<div id="cell-13" class="cell" data-execution_count="6">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1"></a><span class="co"># overall average return = return prior for James-Stein</span></span>
<span id="cb6-2"><a href="#cb6-2"></a>grand_mean<span class="op">=</span>np.mean(means)</span>
<span id="cb6-3"><a href="#cb6-3"></a></span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="co"># James-Stein shrinkage factor</span></span>
<span id="cb6-5"><a href="#cb6-5"></a>phi_js <span class="op">=</span> np.<span class="bu">min</span>([<span class="dv">1</span>,(<span class="bu">len</span>(means)<span class="op">-</span><span class="dv">2</span>)<span class="op">/</span>(<span class="bu">len</span>(log_returns)<span class="op">*</span>(np.matrix(means<span class="op">-</span>grand_mean)<span class="op">*\</span></span>
<span id="cb6-6"><a href="#cb6-6"></a>        la.inv(Sigma)<span class="op">*</span>np.matrix(means<span class="op">-</span>grand_mean).T)[<span class="dv">0</span>,<span class="dv">0</span>])])</span>
<span id="cb6-7"><a href="#cb6-7"></a></span>
<span id="cb6-8"><a href="#cb6-8"></a><span class="co"># James-Stein expected returns</span></span>
<span id="cb6-9"><a href="#cb6-9"></a>js_means <span class="op">=</span> (<span class="dv">1</span><span class="op">-</span>phi_js)<span class="op">*</span>means <span class="op">+</span> phi_js<span class="op">*</span>grand_mean</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div id="cell-14" class="cell" data-execution_count="7">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1"></a>phi_js</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="7">
<pre><code>0.4475110828261736</code></pre>
</div>
</div>
<p>Aus der vorliegenden Datengrundlage ergab sich entsprechend Formel (4) ein Schrumpfungsfaktor in Höhe von <span class="math inline">\(\hat{w}=0,44\)</span>. Auf Basis des ermittelten Schrumpfungsfaktors konnten anschließend die erwarteten Renditen der einzelnen Wertpapiere mit Hilfe des James-Stein Schätzers bestimmt werden. Ein Vergleich mit den herkömmlich geschätzten erwarteten Renditen ergibt:</p>
<div id="cell-16" class="cell" data-execution_count="8">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1"></a>pd.DataFrame({<span class="st">'JS-Means (%)'</span>: np.<span class="bu">round</span>(js_means, <span class="dv">4</span>)<span class="op">*</span><span class="dv">100</span>,<span class="op">\</span></span>
<span id="cb9-2"><a href="#cb9-2"></a>              <span class="st">'Hist. Means (%)'</span>: np.<span class="bu">round</span>(means,<span class="dv">4</span>)<span class="op">*</span><span class="dv">100</span>,<span class="op">\</span></span>
<span id="cb9-3"><a href="#cb9-3"></a>             <span class="st">'Abs. Difference (%)'</span>: np.<span class="bu">round</span>(js_means<span class="op">-</span>means, <span class="dv">4</span>)<span class="op">*</span><span class="dv">100</span>},<span class="op">\</span></span>
<span id="cb9-4"><a href="#cb9-4"></a>             index<span class="op">=</span>frame.columns)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="8">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">JS-Means (%)</th>
<th data-quarto-table-cell-role="th">Hist. Means (%)</th>
<th data-quarto-table-cell-role="th">Abs. Difference (%)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">ABT</th>
<td>2.99</td>
<td>3.10</td>
<td>-0.12</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">BA</th>
<td>1.68</td>
<td>0.74</td>
<td>0.94</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">COST</th>
<td>3.78</td>
<td>4.53</td>
<td>-0.76</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">CSCO</th>
<td>3.63</td>
<td>4.27</td>
<td>-0.64</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">IBM</th>
<td>4.15</td>
<td>5.21</td>
<td>-1.06</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">INTC</th>
<td>-0.65</td>
<td>-3.47</td>
<td>2.83</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">MRK</th>
<td>2.79</td>
<td>2.75</td>
<td>0.04</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">MSFT</th>
<td>2.55</td>
<td>2.32</td>
<td>0.23</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">T</th>
<td>1.86</td>
<td>1.07</td>
<td>0.79</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">XOM</th>
<td>5.63</td>
<td>7.89</td>
<td>-2.26</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Oder in Form eines Balkendiagramms visualisiert:</p>
<div id="cell-18" class="cell" data-execution_count="9">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1"></a>pd.DataFrame({<span class="st">'JS-Means'</span>: js_means, <span class="st">'Hist. Means'</span>: means},index<span class="op">=</span>frame.columns). <span class="op">\</span></span>
<span id="cb10-2"><a href="#cb10-2"></a>plot.bar(stacked<span class="op">=</span><span class="va">False</span>, alpha<span class="op">=</span><span class="fl">0.5</span>, figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">5</span>))<span class="op">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="kapitel4a_files/figure-html/cell-10-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Es zeigt sich, dass zwischen der herkömmlichen Schätzung der erwarteten Renditen und der Prognosen mit Hilfe des James-Stein Schätzers nur geringfügige Unterschiede bestehen. Zieht man jedoch in Betracht, dass die klassische Portfoliooptimierung bereits auf geringe Abweichungen in den erwarteten Renditen sehr sensitiv reagiert, sollte der Einfluss des James-Stein Schätzers im Kontext der Portfoliooptimierung nicht unterschätzt werden.</p>
</section>
<section id="bayes-stein-schätzer" class="level3" data-number="5.5.3">
<h3 data-number="5.5.3" class="anchored" data-anchor-id="bayes-stein-schätzer"><span class="header-section-number">5.5.3</span> Bayes-Stein Schätzer</h3>
<p>Zunächst wird der adjustierte Schätzer <span class="math inline">\(\hat{\Sigma}\)</span> der Varianz-Kovarianzmatrix nach Zellner und Chetty (1965) berechnet. Der Adjustierungsfaktor lautet: <span class="math inline">\(\frac{k-1}{k-N-2}\)</span> (siehe Formel (9) oben).</p>
<div id="cell-21" class="cell" data-execution_count="11">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1"></a>adj_Sigma <span class="op">=</span> ((<span class="bu">len</span>(log_returns)<span class="op">-</span><span class="dv">1</span>)<span class="op">/</span>(<span class="bu">len</span>(log_returns)<span class="op">-</span><span class="bu">len</span>(means)<span class="op">-</span><span class="dv">2</span>))<span class="op">*</span>Sigma</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>Mit der Budgetrestriktion als einzige Nebenbedingung ergeben sich die Gewichte des MVP gemäß: <span class="math display">\[ (5) \quad w_{MVP}=\frac{\iota^T\Sigma^{-1}}{\iota^T\Sigma^{-1}\iota}. \]</span></p>
<div id="cell-23" class="cell" data-execution_count="12">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1"></a>iota <span class="op">=</span> np.ones(Sigma.shape[<span class="dv">0</span>]) <span class="co"># identity vector of dimension 10</span></span>
<span id="cb12-2"><a href="#cb12-2"></a>inv_adj_Sigma <span class="op">=</span> la.inv(adj_Sigma)</span>
<span id="cb12-3"><a href="#cb12-3"></a>Weight_GMV <span class="op">=</span> inv_adj_Sigma <span class="op">@</span> iota <span class="op">/</span> (iota <span class="op">@</span> inv_adj_Sigma <span class="op">@</span> iota)</span>
<span id="cb12-4"><a href="#cb12-4"></a>pd.DataFrame([<span class="bu">round</span>(x,<span class="dv">4</span>) <span class="cf">for</span> x <span class="kw">in</span> Weight_GMV],index<span class="op">=</span>frame.columns).T</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="12">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">ABT</th>
<th data-quarto-table-cell-role="th">BA</th>
<th data-quarto-table-cell-role="th">COST</th>
<th data-quarto-table-cell-role="th">CSCO</th>
<th data-quarto-table-cell-role="th">IBM</th>
<th data-quarto-table-cell-role="th">INTC</th>
<th data-quarto-table-cell-role="th">MRK</th>
<th data-quarto-table-cell-role="th">MSFT</th>
<th data-quarto-table-cell-role="th">T</th>
<th data-quarto-table-cell-role="th">XOM</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>0.4359</td>
<td>-0.0418</td>
<td>0.2083</td>
<td>-0.0125</td>
<td>0.141</td>
<td>0.0902</td>
<td>-0.1451</td>
<td>-0.0239</td>
<td>0.0445</td>
<td>0.3035</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Für die erwartete Rendite des MVP gilt nach Gleichung (6): <span class="math inline">\(\hat{\mu}_{MVP}=w_{MVP}Y\)</span>.</p>
<div id="cell-25" class="cell" data-execution_count="13">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1"></a><span class="co"># expected return of MVP (= return prior for James-Stein)</span></span>
<span id="cb13-2"><a href="#cb13-2"></a>eret_GMV <span class="op">=</span> (np.matrix(Weight_GMV)<span class="op">*</span> np.matrix(means).T)[<span class="dv">0</span>,<span class="dv">0</span>]</span>
<span id="cb13-3"><a href="#cb13-3"></a>eret_GMV</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="13">
<pre><code>0.0462098479530484</code></pre>
</div>
</div>
<p>Berechnung des BS-Schrumpfungsfaktors gemäß Gleichung (8):</p>
<p><span class="math display">\[ (8) \quad \hat{w}=\frac{N+2}{(N+2)+k(Y-\hat{\mu}_{MVP}\iota)^T\Sigma^{-1}(Y-\hat{\mu}_{MVP}\iota)}. \]</span></p>
<div id="cell-27" class="cell" data-execution_count="14">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1"></a><span class="co"># calculation of Bayes-Stein shrinkage factor phi_bs:</span></span>
<span id="cb15-2"><a href="#cb15-2"></a>phi_bs <span class="op">=</span> (<span class="bu">len</span>(means)<span class="op">+</span><span class="dv">2</span>)<span class="op">/</span>((<span class="bu">len</span>(means)<span class="op">+</span><span class="dv">2</span>) <span class="op">+</span> <span class="bu">len</span>(log_returns)<span class="op">*</span>(np.matrix(means<span class="op">-</span>eret_GMV)<span class="op">\</span></span>
<span id="cb15-3"><a href="#cb15-3"></a>        <span class="op">*</span> inv_adj_Sigma <span class="op">*</span> np.matrix(means<span class="op">-</span>eret_GMV).T)[<span class="dv">0</span>,<span class="dv">0</span>])</span>
<span id="cb15-4"><a href="#cb15-4"></a>phi_bs</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="14">
<pre><code>0.4777796219708953</code></pre>
</div>
</div>
<p>Es resultiert ein Schrumpfungsfaktor in Höhe von <span class="math inline">\(\hat{w}=0,48\)</span>. Nun läßt sich der Bayes-Stein Schätzer der erwarteten Renditen berechnen:</p>
<p><span class="math display">\[ \quad \hat{\mu}_{BS}=(1-\hat{w})Y+\hat{w}\hat{\mu}_{MVP}\iota . \]</span></p>
<div id="cell-29" class="cell" data-execution_count="15">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1"></a><span class="co"># Bayes-Stein expected returns</span></span>
<span id="cb17-2"><a href="#cb17-2"></a>bs_means <span class="op">=</span> (<span class="dv">1</span><span class="op">-</span>phi_bs)<span class="op">*</span>means <span class="op">+</span> phi_bs<span class="op">*</span>eret_GMV</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>Ein Vergleich der drei Schätzer (JS, BS, Historisch) für <span class="math inline">\(\mu\)</span> in Tabellenform:</p>
<div id="cell-31" class="cell" data-execution_count="16">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1"></a>pd.DataFrame({<span class="st">'JS-Means'</span>: np.<span class="bu">round</span>(js_means,<span class="dv">4</span>),<span class="op">\</span></span>
<span id="cb18-2"><a href="#cb18-2"></a>              <span class="st">'BS-Means'</span>: np.<span class="bu">round</span>(bs_means,<span class="dv">4</span>),<span class="op">\</span></span>
<span id="cb18-3"><a href="#cb18-3"></a>              <span class="st">'Hist. Means'</span>: np.<span class="bu">round</span>(means,<span class="dv">4</span>)},<span class="op">\</span></span>
<span id="cb18-4"><a href="#cb18-4"></a>             index<span class="op">=</span>frame.columns)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="16">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">JS-Means</th>
<th data-quarto-table-cell-role="th">BS-Means</th>
<th data-quarto-table-cell-role="th">Hist. Means</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">ABT</th>
<td>0.0299</td>
<td>0.0383</td>
<td>0.0310</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">BA</th>
<td>0.0168</td>
<td>0.0259</td>
<td>0.0074</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">COST</th>
<td>0.0378</td>
<td>0.0458</td>
<td>0.0453</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">CSCO</th>
<td>0.0363</td>
<td>0.0444</td>
<td>0.0427</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">IBM</th>
<td>0.0415</td>
<td>0.0493</td>
<td>0.0521</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">INTC</th>
<td>-0.0065</td>
<td>0.0039</td>
<td>-0.0347</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">MRK</th>
<td>0.0279</td>
<td>0.0364</td>
<td>0.0275</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">MSFT</th>
<td>0.0255</td>
<td>0.0342</td>
<td>0.0232</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">T</th>
<td>0.0186</td>
<td>0.0276</td>
<td>0.0107</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">XOM</th>
<td>0.0563</td>
<td>0.0633</td>
<td>0.0789</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>oder als Balkendiagramm:</p>
<div id="cell-33" class="cell" data-execution_count="17">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1"></a>pd.DataFrame({<span class="st">'BS-Means'</span>: bs_means, <span class="st">'JS-Means'</span>: js_means, <span class="st">'Hist. Means'</span>: means},index<span class="op">=</span>frame.columns). <span class="op">\</span></span>
<span id="cb19-2"><a href="#cb19-2"></a>plot.bar(stacked<span class="op">=</span><span class="va">False</span>, alpha<span class="op">=</span><span class="fl">0.5</span>, figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">5</span>))<span class="op">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="kapitel4a_files/figure-html/cell-17-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="ledoit-wolf-schätzer-der-varianz-kovarianzmatrix" class="level3" data-number="5.5.4">
<h3 data-number="5.5.4" class="anchored" data-anchor-id="ledoit-wolf-schätzer-der-varianz-kovarianzmatrix"><span class="header-section-number">5.5.4</span> Ledoit-Wolf Schätzer der Varianz-Kovarianzmatrix</h3>
<p>Über <code>log_returns.corr().values</code> wird die empirische Korrelationsmatrix <span class="math inline">\(C\)</span> auf Basis stetiger Renditen berechnet und in das Array <code>corr</code> überführt. Die durchschnittliche Korrelation <span class="math inline">\(\hat{\rho}\)</span> wird mit <code>mean(corr[corr!=1])</code> ermittelt, wobei die Diagonalelemente <span class="math inline">\(\hat{\rho}_{ii}\)</span> von <span class="math inline">\(C\)</span> durch die Bedingung <code>corr!=1</code> ausgeschlossen werden.</p>
<div id="cell-35" class="cell" data-execution_count="18">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1"></a>corr <span class="op">=</span> log_returns.corr().values</span>
<span id="cb20-2"><a href="#cb20-2"></a>Sigma <span class="op">=</span> log_returns.cov().values<span class="op">*</span><span class="dv">12</span></span>
<span id="cb20-3"><a href="#cb20-3"></a></span>
<span id="cb20-4"><a href="#cb20-4"></a><span class="co"># average of pairwise correlation (without diagonal elements)</span></span>
<span id="cb20-5"><a href="#cb20-5"></a>avg_corr <span class="op">=</span> np.mean(corr[corr<span class="op">!=</span><span class="dv">1</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p><strong>Konstruktion der Korrelationsmatrix <span class="math inline">\(C_{cc}\)</span> mit konstanter Korrelation</strong></p>
<p><code>np.eye(len(corr))</code> erzeugt eine Diagonalmatrix der Dimension <span class="math inline">\(NxN\)</span> mit nullen off-diagonal und einsen auf der Hauptdiagonalen und <code>np.ones((len(corr), len(corr)))</code> eine “Einser”-Matrix der Dimension <span class="math inline">\(NxN\)</span>. Werden beide Matrizen mit <code>(1-avg_corr)</code> bzw. <code>avg_corr</code> multipliziert und dann addiert, resultiert <span class="math inline">\(C_{cc}\)</span>.</p>
<div id="cell-37" class="cell" data-execution_count="19">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1"></a><span class="co"># generating a corr matrix with constant correlations as off diagonal</span></span>
<span id="cb21-2"><a href="#cb21-2"></a>constant_corr <span class="op">=</span> <span class="op">\</span></span>
<span id="cb21-3"><a href="#cb21-3"></a>(<span class="dv">1</span><span class="op">-</span>avg_corr)<span class="op">*</span>np.eye(<span class="bu">len</span>(corr)) <span class="op">+</span> avg_corr<span class="op">*</span>np.ones((<span class="bu">len</span>(corr), <span class="bu">len</span>(corr)))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p><strong>Konstruktion der Varianz-Kovarianzmatrix <span class="math inline">\(\hat{\Sigma}_{cc}\)</span> unter Annahme konstanter Korrelation</strong></p>
<p>Es gilt: <span class="math inline">\(\hat{\Sigma}_{cc}=\Lambda C_{cc} \Lambda^T\)</span>.</p>
<p>Über <code>np.sqrt(np.diagonal(Sigma))</code> werden die Diagonalelemente (Varianzen) der empirischen Varianz-Kovarianzmatrix <span class="math inline">\(\hat{\Sigma}\)</span> extrahiert und in ein Array von Volatilitäten überführt. Dieses Array wird dann mit <code>np.diag()</code> in die Diagonalmatrix <span class="math inline">\(\Lambda\)</span> transformiert.</p>
<div id="cell-39" class="cell" data-execution_count="22">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1"></a><span class="co"># calculation of covariance matrix using a constant correlation assumption </span></span>
<span id="cb22-2"><a href="#cb22-2"></a><span class="co"># the first part is diagonal matrix containing the volatilities p.a.</span></span>
<span id="cb22-3"><a href="#cb22-3"></a>const_Sigma <span class="op">=\</span></span>
<span id="cb22-4"><a href="#cb22-4"></a>(np.diag(np.sqrt(np.diagonal(Sigma))).dot(constant_corr)).dot(  <span class="op">\</span></span>
<span id="cb22-5"><a href="#cb22-5"></a> np.diag(np.sqrt(np.diagonal(Sigma))))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>Unter Annahme eines Schrumpfungsfaktors in Höhe von <span class="math inline">\(\hat{w}=0,45\)</span>, lässt sich nun gemäß Gleichung (10) der Ledoit-Wolf Schätzer der Varianz-Kovarianzmatrix ermitteln:</p>
<p><span class="math display">\[ (10) \quad \hat{\Sigma}_{LW}=\hat{w}\hat{\Sigma}_{cc}+(1-\hat{w})\hat{\Sigma}.\]</span></p>
<div id="cell-41" class="cell" data-execution_count="23">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1"></a><span class="co"># assuming a given shrinkage constant phi_lw</span></span>
<span id="cb23-2"><a href="#cb23-2"></a>phi_lw <span class="op">=</span> <span class="fl">0.45</span></span>
<span id="cb23-3"><a href="#cb23-3"></a></span>
<span id="cb23-4"><a href="#cb23-4"></a><span class="co"># calculating the Ledoit-Wolf covariance matrix</span></span>
<span id="cb23-5"><a href="#cb23-5"></a>lw_Sigma <span class="op">=</span> phi_lw <span class="op">*</span> const_Sigma <span class="op">+</span> (<span class="dv">1</span><span class="op">-</span>phi_lw)<span class="op">*</span>Sigma</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div id="cell-42" class="cell" data-execution_count="24">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1"></a>lw_Sigma.shape</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="24">
<pre><code>(10, 10)</code></pre>
</div>
</div>
</section>
<section id="vergleich-der-effizienzkurven-und-portfolioallokationen" class="level3" data-number="5.5.5">
<h3 data-number="5.5.5" class="anchored" data-anchor-id="vergleich-der-effizienzkurven-und-portfolioallokationen"><span class="header-section-number">5.5.5</span> Vergleich der Effizienzkurven und Portfolioallokationen</h3>
<section id="allgemeines" class="level4" data-number="5.5.5.1">
<h4 data-number="5.5.5.1" class="anchored" data-anchor-id="allgemeines"><span class="header-section-number">5.5.5.1</span> Allgemeines</h4>
<p>Nachdem die erwarteten Renditen (und die Varianz-Kovarianzmatrix) ermittelt wurden, können diese als Inputparameter in die Portfoliooptimierung einfließen. Im Folgenden betrachten wir den Fall mit Leerverkaufsverbot (implementiert über positive Bestandsgrenzen).</p>
<p>Zunächst definieren wir die Zielfunktionen der Optimierung (<span class="math inline">\(\sigma_P^2 \rightarrow \min_{w}!\)</span> bzw. für das MEP: <span class="math inline">\(\mu_P \rightarrow \max_{w}!\)</span>) und bestimmen die Gewichte des Minimum Varianz Portfolios (MVP) und des Maximum Ertrag Portfolios (MEP). Die Struktur des MVP ist unabhängig von der Schätzung des Vektors der erwarteten Renditen. Wird dann die Portfoliooptimierung für verschiedene Zielrenditen zwischen der erwarteten Rendite des MVP und der des MEP durchgeführt, ergibt sich die entsprechende Effizienzkurve.</p>
<div id="cell-44" class="cell" data-execution_count="25">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1"></a><span class="co"># definition of target function for MVP to be minimized</span></span>
<span id="cb26-2"><a href="#cb26-2"></a><span class="kw">def</span> calculate_portfolio_var(w,Sigma):</span>
<span id="cb26-3"><a href="#cb26-3"></a>    <span class="co"># function that calculates portfolio risk</span></span>
<span id="cb26-4"><a href="#cb26-4"></a>    w <span class="op">=</span> np.matrix(w) <span class="co"># w is a row (not column!) vector</span></span>
<span id="cb26-5"><a href="#cb26-5"></a>    <span class="cf">return</span> (w<span class="op">*</span>Sigma<span class="op">*</span>w.T)[<span class="dv">0</span>,<span class="dv">0</span>]</span>
<span id="cb26-6"><a href="#cb26-6"></a></span>
<span id="cb26-7"><a href="#cb26-7"></a><span class="co"># definition of target function for MEP to be maximized</span></span>
<span id="cb26-8"><a href="#cb26-8"></a><span class="kw">def</span> calculate_negative_portfolio_ret(w,means):</span>
<span id="cb26-9"><a href="#cb26-9"></a>    <span class="co"># function that calculates -1 times the portfolio expected return</span></span>
<span id="cb26-10"><a href="#cb26-10"></a>    w <span class="op">=</span> np.matrix(w) <span class="co"># w is a row (not column!) vector</span></span>
<span id="cb26-11"><a href="#cb26-11"></a>    means <span class="op">=</span> np.matrix(means)</span>
<span id="cb26-12"><a href="#cb26-12"></a>    <span class="cf">return</span> <span class="op">-</span>(w<span class="op">*</span>means.T)[<span class="dv">0</span>,<span class="dv">0</span>]</span>
<span id="cb26-13"><a href="#cb26-13"></a></span>
<span id="cb26-14"><a href="#cb26-14"></a><span class="kw">def</span> calculate_portfolio_ret(w,means):</span>
<span id="cb26-15"><a href="#cb26-15"></a>    <span class="co"># function that calculates portfolio expected return</span></span>
<span id="cb26-16"><a href="#cb26-16"></a>    w <span class="op">=</span> np.matrix(w) <span class="co"># w is a row (not column!) vector</span></span>
<span id="cb26-17"><a href="#cb26-17"></a>    means <span class="op">=</span> np.matrix(means)</span>
<span id="cb26-18"><a href="#cb26-18"></a>    <span class="cf">return</span> (w<span class="op">*</span>means.T)[<span class="dv">0</span>,<span class="dv">0</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>Gewichte des MVP und des MEP (unter Verwendung der historischen Varianz-Kovarianzmatrix <code>Sigma</code>, und Leerverkaufsverbot; naives Portfolio als Startgewichte).</p>
<div id="cell-46" class="cell" data-execution_count="26">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1"></a><span class="co"># use equal weights "Weight_1N" as starting values </span></span>
<span id="cb27-2"><a href="#cb27-2"></a>Weight_1N <span class="op">=</span> np.tile(<span class="fl">1.0</span><span class="op">/</span>means.shape[<span class="dv">0</span>], means.shape[<span class="dv">0</span>])</span>
<span id="cb27-3"><a href="#cb27-3"></a></span>
<span id="cb27-4"><a href="#cb27-4"></a><span class="co"># positive weight portfolio</span></span>
<span id="cb27-5"><a href="#cb27-5"></a>bnd<span class="op">=</span>[(<span class="dv">0</span>, <span class="dv">1</span>),(<span class="dv">0</span>, <span class="dv">1</span>),(<span class="dv">0</span>, <span class="dv">1</span>),(<span class="dv">0</span>, <span class="dv">1</span>),(<span class="dv">0</span>, <span class="dv">1</span>),</span>
<span id="cb27-6"><a href="#cb27-6"></a>     (<span class="dv">0</span>, <span class="dv">1</span>),(<span class="dv">0</span>, <span class="dv">1</span>),(<span class="dv">0</span>, <span class="dv">1</span>),(<span class="dv">0</span>, <span class="dv">1</span>),(<span class="dv">0</span>, <span class="dv">1</span>)] <span class="co"># only positive weights</span></span>
<span id="cb27-7"><a href="#cb27-7"></a>cons <span class="op">=</span> ({<span class="st">'type'</span>: <span class="st">'eq'</span>, <span class="st">'fun'</span>: <span class="kw">lambda</span> x:  np.<span class="bu">sum</span>(x)<span class="op">-</span><span class="fl">1.0</span>})</span>
<span id="cb27-8"><a href="#cb27-8"></a></span>
<span id="cb27-9"><a href="#cb27-9"></a><span class="co"># MVP</span></span>
<span id="cb27-10"><a href="#cb27-10"></a>res2<span class="op">=</span> minimize(calculate_portfolio_var, Weight_1N, args<span class="op">=</span>Sigma, </span>
<span id="cb27-11"><a href="#cb27-11"></a>               bounds <span class="op">=</span> bnd, method<span class="op">=</span><span class="st">'SLSQP'</span>,constraints<span class="op">=</span>cons,tol<span class="op">=</span><span class="fl">1e-10</span>, </span>
<span id="cb27-12"><a href="#cb27-12"></a>               options<span class="op">=</span>{<span class="st">'disp'</span>: <span class="va">True</span>})</span>
<span id="cb27-13"><a href="#cb27-13"></a>Weight_MV2 <span class="op">=</span> res2.x</span>
<span id="cb27-14"><a href="#cb27-14"></a></span>
<span id="cb27-15"><a href="#cb27-15"></a><span class="co"># MEP</span></span>
<span id="cb27-16"><a href="#cb27-16"></a>res4<span class="op">=</span> minimize(calculate_negative_portfolio_ret, Weight_1N, args<span class="op">=</span>means, </span>
<span id="cb27-17"><a href="#cb27-17"></a>               bounds <span class="op">=</span> bnd, method<span class="op">=</span><span class="st">'SLSQP'</span>,constraints<span class="op">=</span>cons,tol<span class="op">=</span><span class="fl">1e-10</span>, </span>
<span id="cb27-18"><a href="#cb27-18"></a>               options<span class="op">=</span>{<span class="st">'disp'</span>: <span class="va">True</span>})</span>
<span id="cb27-19"><a href="#cb27-19"></a>Weight_MRP <span class="op">=</span> res4.x</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Optimization terminated successfully    (Exit mode 0)
            Current function value: 0.012112846573987465
            Iterations: 21
            Function evaluations: 231
            Gradient evaluations: 21
Optimization terminated successfully    (Exit mode 0)
            Current function value: -0.07886975933686077
            Iterations: 11
            Function evaluations: 121
            Gradient evaluations: 11</code></pre>
</div>
</div>
</section>
<section id="james-stein-versus-historische-mittelwerte" class="level4" data-number="5.5.5.2">
<h4 data-number="5.5.5.2" class="anchored" data-anchor-id="james-stein-versus-historische-mittelwerte"><span class="header-section-number">5.5.5.2</span> James-Stein versus historische Mittelwerte</h4>
<p>Zunächst erfolgt die Bestimmung des Intervals der Zielrenditen, separat auf Basis der JS und der historisch geschätzten erwarteten Renditen.</p>
<div id="cell-48" class="cell" data-execution_count="27">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1"></a><span class="co"># calculation of min and max target return</span></span>
<span id="cb29-2"><a href="#cb29-2"></a><span class="co"># min: expected return of MVP, max: expected return of MEP</span></span>
<span id="cb29-3"><a href="#cb29-3"></a></span>
<span id="cb29-4"><a href="#cb29-4"></a><span class="co"># for historic means</span></span>
<span id="cb29-5"><a href="#cb29-5"></a><span class="bu">min</span> <span class="op">=</span> calculate_portfolio_ret(Weight_MV2, means)</span>
<span id="cb29-6"><a href="#cb29-6"></a><span class="bu">max</span> <span class="op">=</span> calculate_portfolio_ret(Weight_MRP, means)</span>
<span id="cb29-7"><a href="#cb29-7"></a></span>
<span id="cb29-8"><a href="#cb29-8"></a><span class="co"># for JS means</span></span>
<span id="cb29-9"><a href="#cb29-9"></a>min_js <span class="op">=</span> calculate_portfolio_ret(Weight_MV2, js_means)</span>
<span id="cb29-10"><a href="#cb29-10"></a>max_js <span class="op">=</span> calculate_portfolio_ret(Weight_MRP, js_means)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>Berechnung der Effizienzkurven. Zunächst für die historischen Mittelwerte:</p>
<div id="cell-50" class="cell" data-execution_count="28">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1"></a><span class="co"># efficient frontier with hist. mean returns</span></span>
<span id="cb30-2"><a href="#cb30-2"></a>V_Target <span class="op">=</span> np.linspace(<span class="bu">min</span>, <span class="bu">max</span>, num<span class="op">=</span><span class="dv">45</span>)</span>
<span id="cb30-3"><a href="#cb30-3"></a>V_Risk <span class="op">=</span> np.zeros(V_Target.shape)</span>
<span id="cb30-4"><a href="#cb30-4"></a>V_Return <span class="op">=</span> np.zeros(V_Target.shape)</span>
<span id="cb30-5"><a href="#cb30-5"></a>V_Weight <span class="op">=</span> np.zeros((V_Target.shape[<span class="dv">0</span>], means.shape[<span class="dv">0</span>]))</span>
<span id="cb30-6"><a href="#cb30-6"></a><span class="cf">for</span> idx, Target_Return <span class="kw">in</span> <span class="bu">enumerate</span>(V_Target):</span>
<span id="cb30-7"><a href="#cb30-7"></a>    cons <span class="op">=</span> ({<span class="st">'type'</span>: <span class="st">'eq'</span>, <span class="st">'fun'</span>: <span class="kw">lambda</span> x:  np.<span class="bu">sum</span>(x)<span class="op">-</span><span class="fl">1.0</span>},</span>
<span id="cb30-8"><a href="#cb30-8"></a>            {<span class="st">'type'</span>: <span class="st">'eq'</span>, <span class="st">'fun'</span>: <span class="kw">lambda</span> x:  calculate_portfolio_ret(x,means)<span class="op">-</span>Target_Return})</span>
<span id="cb30-9"><a href="#cb30-9"></a>    res<span class="op">=</span> minimize(calculate_portfolio_var, Weight_1N, args<span class="op">=</span>Sigma, </span>
<span id="cb30-10"><a href="#cb30-10"></a>               bounds <span class="op">=</span> bnd, method<span class="op">=</span><span class="st">'SLSQP'</span>,constraints<span class="op">=</span>cons,tol<span class="op">=</span><span class="fl">1e-10</span>)</span>
<span id="cb30-11"><a href="#cb30-11"></a>    V_Weight[idx, :] <span class="op">=</span> res.x.T</span>
<span id="cb30-12"><a href="#cb30-12"></a>    V_Return[idx] <span class="op">=</span> calculate_portfolio_ret(res.x,means)</span>
<span id="cb30-13"><a href="#cb30-13"></a>    V_Risk[idx] <span class="op">=</span> np.sqrt(calculate_portfolio_var(res.x, Sigma))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>Und nun für die JS erwarteten Renditen:</p>
<div id="cell-52" class="cell" data-execution_count="29">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1"></a><span class="co"># efficient frontier with JS mean returns</span></span>
<span id="cb31-2"><a href="#cb31-2"></a>V_Target_js <span class="op">=</span> np.linspace(min_js, max_js, num<span class="op">=</span><span class="dv">45</span>)</span>
<span id="cb31-3"><a href="#cb31-3"></a>V_Risk_js <span class="op">=</span> np.zeros(V_Target.shape)</span>
<span id="cb31-4"><a href="#cb31-4"></a>V_Return_js <span class="op">=</span> np.zeros(V_Target.shape)</span>
<span id="cb31-5"><a href="#cb31-5"></a>V_Weight_js <span class="op">=</span> np.zeros((V_Target.shape[<span class="dv">0</span>], means.shape[<span class="dv">0</span>]))</span>
<span id="cb31-6"><a href="#cb31-6"></a><span class="cf">for</span> idx, Target_Return <span class="kw">in</span> <span class="bu">enumerate</span>(V_Target_js):</span>
<span id="cb31-7"><a href="#cb31-7"></a>    cons <span class="op">=</span> ({<span class="st">'type'</span>: <span class="st">'eq'</span>, <span class="st">'fun'</span>: <span class="kw">lambda</span> x:  np.<span class="bu">sum</span>(x)<span class="op">-</span><span class="fl">1.0</span>},</span>
<span id="cb31-8"><a href="#cb31-8"></a>            {<span class="st">'type'</span>: <span class="st">'eq'</span>, <span class="st">'fun'</span>: <span class="kw">lambda</span> x:  calculate_portfolio_ret(x,js_means)<span class="op">-</span>Target_Return})</span>
<span id="cb31-9"><a href="#cb31-9"></a>    res<span class="op">=</span> minimize(calculate_portfolio_var, Weight_1N, args<span class="op">=</span>Sigma, </span>
<span id="cb31-10"><a href="#cb31-10"></a>               bounds <span class="op">=</span> bnd, method<span class="op">=</span><span class="st">'SLSQP'</span>,constraints<span class="op">=</span>cons,tol<span class="op">=</span><span class="fl">1e-10</span>)</span>
<span id="cb31-11"><a href="#cb31-11"></a>    V_Weight_js[idx, :] <span class="op">=</span> res.x.T</span>
<span id="cb31-12"><a href="#cb31-12"></a>    V_Return_js[idx] <span class="op">=</span> calculate_portfolio_ret(res.x,js_means)</span>
<span id="cb31-13"><a href="#cb31-13"></a>    V_Risk_js[idx] <span class="op">=</span> np.sqrt(calculate_portfolio_var(res.x, Sigma))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>Graphische Darstellung der Effizienzkurven:</p>
<div id="cell-54" class="cell" data-execution_count="30">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1"></a>fig1 <span class="op">=</span> plt.figure(num<span class="op">=</span><span class="dv">1</span>, facecolor<span class="op">=</span><span class="st">'w'</span>, figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">5</span>))</span>
<span id="cb32-2"><a href="#cb32-2"></a>ax <span class="op">=</span> fig1.add_subplot(<span class="dv">111</span>)</span>
<span id="cb32-3"><a href="#cb32-3"></a>plt.plot(V_Risk, V_Target, <span class="st">'g:'</span>, label<span class="op">=</span><span class="st">'Hist.-efficient frontier without short selling'</span>)</span>
<span id="cb32-4"><a href="#cb32-4"></a>plt.plot(V_Risk_js, V_Target_js, <span class="st">'g-'</span>, label<span class="op">=</span><span class="st">'JS-efficient frontier without short selling'</span>)</span>
<span id="cb32-5"><a href="#cb32-5"></a>plt.plot(np.sqrt(np.diagonal(Sigma)), means, <span class="st">'rx'</span>, label<span class="op">=</span><span class="st">'Asset'</span>)</span>
<span id="cb32-6"><a href="#cb32-6"></a><span class="cf">for</span> i, txt <span class="kw">in</span> <span class="bu">enumerate</span>(frame.columns):</span>
<span id="cb32-7"><a href="#cb32-7"></a>   ax.annotate(txt, (np.sqrt(np.diagonal(Sigma))[i],means[i]))</span>
<span id="cb32-8"><a href="#cb32-8"></a>plt.legend(loc<span class="op">=</span><span class="dv">3</span>,  frameon<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb32-9"><a href="#cb32-9"></a>plt.xlabel(<span class="st">'Standard deviation'</span>)</span>
<span id="cb32-10"><a href="#cb32-10"></a>plt.ylabel(<span class="st">'Expected return'</span>)</span>
<span id="cb32-11"><a href="#cb32-11"></a>plt.title(<span class="st">'Comparing efficient frontiers'</span>)</span>
<span id="cb32-12"><a href="#cb32-12"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="kapitel4a_files/figure-html/cell-28-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Es wird deutlich, dass die Effizienzkurve auf Basis der James-Stein erwarteten Renditen deutlich unter der herkömmlichen Effizienzkurve liegt, obwohl die absoluten Abweichungen der dargestellten Schätzverfahren nur geringfügig waren.</p>
<p>Werden jedoch die einzelnen Portfoliogewichte entlang der gesamten Effizienzkurve gemeinsam in einem Flächendiagramm dargestellt, erscheint auf den ersten Blick auffällig, dass die Portfoliogewichte beim Vergleich offensichtlich nur minimal abweichen. Bei genauerer Betrachtung stellt man jedoch fest, dass sich die Portfoliogewichte auf der horizontalen Achse verschoben haben. Man erkennt auch, dass sich die Zuordnung der erwarteten Renditen entsprechend verändert hat.</p>
<p>Portfoliogewichte auf Grundlage historisch geschätzter erwarteter Renditen:</p>
<div id="cell-57" class="cell" data-execution_count="31">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1"></a>fig2 <span class="op">=</span> plt.figure(num<span class="op">=</span><span class="dv">2</span>, facecolor<span class="op">=</span><span class="st">'w'</span>, figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">5</span>))</span>
<span id="cb33-2"><a href="#cb33-2"></a>plt.stackplot(V_Target, V_Weight.T<span class="op">*</span><span class="dv">100</span>)</span>
<span id="cb33-3"><a href="#cb33-3"></a>plt.axis([<span class="bu">min</span>, <span class="bu">max</span>, <span class="fl">0.0</span>, <span class="fl">100.0</span>])</span>
<span id="cb33-4"><a href="#cb33-4"></a>plt.legend(<span class="bu">list</span>(frame.columns),</span>
<span id="cb33-5"><a href="#cb33-5"></a>           loc<span class="op">=</span><span class="st">'upper left'</span>, bbox_to_anchor<span class="op">=</span>(<span class="fl">1.0</span>, <span class="fl">1.0</span>), frameon<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb33-6"><a href="#cb33-6"></a>plt.xlabel(<span class="st">'Target expected return (%)'</span>)</span>
<span id="cb33-7"><a href="#cb33-7"></a>plt.ylabel(<span class="st">'Allocation weight (%)'</span>)</span>
<span id="cb33-8"><a href="#cb33-8"></a>plt.title(<span class="st">'Portfolioweights based on historic mean returns'</span>)</span>
<span id="cb33-9"><a href="#cb33-9"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="kapitel4a_files/figure-html/cell-29-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Portfoliogewichte auf Grundlage des JS Schätzers der erwarteten Renditen:</p>
<div id="cell-59" class="cell" data-execution_count="32">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1"></a>fig3 <span class="op">=</span> plt.figure(num<span class="op">=</span><span class="dv">2</span>, facecolor<span class="op">=</span><span class="st">'w'</span>, figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">5</span>))</span>
<span id="cb34-2"><a href="#cb34-2"></a>plt.stackplot(V_Target_js, V_Weight_js.T<span class="op">*</span><span class="dv">100</span>)</span>
<span id="cb34-3"><a href="#cb34-3"></a>plt.axis([min_js, max_js, <span class="fl">0.0</span>, <span class="fl">100.0</span>])</span>
<span id="cb34-4"><a href="#cb34-4"></a>plt.legend(<span class="bu">list</span>(frame.columns),</span>
<span id="cb34-5"><a href="#cb34-5"></a>           loc<span class="op">=</span><span class="st">'upper left'</span>, bbox_to_anchor<span class="op">=</span>(<span class="fl">1.0</span>, <span class="fl">1.0</span>), frameon<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb34-6"><a href="#cb34-6"></a>plt.xlabel(<span class="st">'Target expected return'</span>) </span>
<span id="cb34-7"><a href="#cb34-7"></a>plt.title(<span class="st">'Portfolioweights based on JS mean return estimates'</span>)</span>
<span id="cb34-8"><a href="#cb34-8"></a>plt.ylabel(<span class="st">'Allocation weight (%)'</span>)</span>
<span id="cb34-9"><a href="#cb34-9"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="kapitel4a_files/figure-html/cell-30-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="bayes-stein-versus-historische-mittelwerte" class="level4" data-number="5.5.5.3">
<h4 data-number="5.5.5.3" class="anchored" data-anchor-id="bayes-stein-versus-historische-mittelwerte"><span class="header-section-number">5.5.5.3</span> Bayes-Stein versus historische Mittelwerte</h4>
<p>Bestimmung des Intervals der Zielrenditen für die Effizienzkurve auf Basis des BS Schätzers der erwarteten Renditen.</p>
<div id="cell-61" class="cell" data-execution_count="33">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1"></a><span class="co"># calculation of min and max target return</span></span>
<span id="cb35-2"><a href="#cb35-2"></a><span class="co"># min: expected return of MVP, max: expected return of MEP</span></span>
<span id="cb35-3"><a href="#cb35-3"></a></span>
<span id="cb35-4"><a href="#cb35-4"></a>min_bs <span class="op">=</span> calculate_portfolio_ret(Weight_MV2, bs_means)</span>
<span id="cb35-5"><a href="#cb35-5"></a>max_bs <span class="op">=</span> calculate_portfolio_ret(Weight_MRP, bs_means)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>Berechnung der Effizienzkurve:</p>
<div id="cell-63" class="cell" data-execution_count="34">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1"></a>V_Target_bs <span class="op">=</span> np.linspace(min_bs, max_bs, num<span class="op">=</span><span class="dv">45</span>)</span>
<span id="cb36-2"><a href="#cb36-2"></a>V_Risk_bs <span class="op">=</span> np.zeros(V_Target.shape)</span>
<span id="cb36-3"><a href="#cb36-3"></a>V_Return_bs <span class="op">=</span> np.zeros(V_Target.shape)</span>
<span id="cb36-4"><a href="#cb36-4"></a>V_Weight_bs <span class="op">=</span> np.zeros((V_Target.shape[<span class="dv">0</span>], means.shape[<span class="dv">0</span>]))</span>
<span id="cb36-5"><a href="#cb36-5"></a><span class="cf">for</span> idx, Target_Return <span class="kw">in</span> <span class="bu">enumerate</span>(V_Target_bs):</span>
<span id="cb36-6"><a href="#cb36-6"></a>    cons <span class="op">=</span> ({<span class="st">'type'</span>: <span class="st">'eq'</span>, <span class="st">'fun'</span>: <span class="kw">lambda</span> x:  np.<span class="bu">sum</span>(x)<span class="op">-</span><span class="fl">1.0</span>},</span>
<span id="cb36-7"><a href="#cb36-7"></a>            {<span class="st">'type'</span>: <span class="st">'eq'</span>, <span class="st">'fun'</span>: <span class="kw">lambda</span> x:  calculate_portfolio_ret(x,bs_means)<span class="op">-</span>Target_Return})</span>
<span id="cb36-8"><a href="#cb36-8"></a>    res<span class="op">=</span> minimize(calculate_portfolio_var, Weight_1N, args<span class="op">=</span>Sigma, </span>
<span id="cb36-9"><a href="#cb36-9"></a>               bounds <span class="op">=</span> bnd, method<span class="op">=</span><span class="st">'SLSQP'</span>,constraints<span class="op">=</span>cons,tol<span class="op">=</span><span class="fl">1e-10</span>)</span>
<span id="cb36-10"><a href="#cb36-10"></a>    V_Weight_bs[idx, :] <span class="op">=</span> res.x.T</span>
<span id="cb36-11"><a href="#cb36-11"></a>    V_Return_bs[idx] <span class="op">=</span> calculate_portfolio_ret(res.x,bs_means)</span>
<span id="cb36-12"><a href="#cb36-12"></a>    V_Risk_bs[idx] <span class="op">=</span> np.sqrt(calculate_portfolio_var(res.x, Sigma))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>Graphische Darstellung:</p>
<div id="cell-65" class="cell" data-execution_count="35">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1"></a>fig4 <span class="op">=</span> plt.figure(num<span class="op">=</span><span class="dv">1</span>, facecolor<span class="op">=</span><span class="st">'w'</span>, figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">5</span>))</span>
<span id="cb37-2"><a href="#cb37-2"></a>ax <span class="op">=</span> fig4.add_subplot(<span class="dv">111</span>)</span>
<span id="cb37-3"><a href="#cb37-3"></a>plt.plot(V_Risk, V_Target, <span class="st">'g:'</span>, label<span class="op">=</span><span class="st">'Hist.-efficient frontier without short selling'</span>)</span>
<span id="cb37-4"><a href="#cb37-4"></a>plt.plot(V_Risk_bs, V_Target_bs, <span class="st">'g--'</span>, label<span class="op">=</span><span class="st">'BS-efficient frontier without short selling'</span>)</span>
<span id="cb37-5"><a href="#cb37-5"></a>plt.plot(np.sqrt(np.diagonal(Sigma)), means, <span class="st">'rx'</span>, label<span class="op">=</span><span class="st">'Asset'</span>)</span>
<span id="cb37-6"><a href="#cb37-6"></a><span class="cf">for</span> i, txt <span class="kw">in</span> <span class="bu">enumerate</span>(frame.columns):</span>
<span id="cb37-7"><a href="#cb37-7"></a>   ax.annotate(txt, (np.sqrt(np.diagonal(Sigma))[i],means[i]))</span>
<span id="cb37-8"><a href="#cb37-8"></a>plt.legend(loc<span class="op">=</span><span class="dv">3</span>,  frameon<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb37-9"><a href="#cb37-9"></a>plt.xlabel(<span class="st">'Standard deviation'</span>)</span>
<span id="cb37-10"><a href="#cb37-10"></a>plt.ylabel(<span class="st">'Expected return'</span>)</span>
<span id="cb37-11"><a href="#cb37-11"></a>plt.title(<span class="st">'Comparing efficient frontiers'</span>)</span>
<span id="cb37-12"><a href="#cb37-12"></a>plt.show()<span class="op">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="kapitel4a_files/figure-html/cell-33-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Es wird deutlich, dass die Effizienzkurve des Bayes-Stein Schätzers unter der herkömmlichen Effizienzkurve liegt. Werden jedoch die einzelnen Portfoliogewichte entlang der gesamten Effizienzkurve gemeinsam in einem Flächendiagramm dargestellt, erscheint es ähnlich den Ergebnissen des James-Stein Schätzers auf den ersten Blick eher auffällig, dass die Portfoliogewichte beim Vergleich offensichtlich nur geringfügig abweichen. Bei genauerer Betrachtung stellt man jedoch fest, dass sich die Portfoliogewichte tatsächlich auf der horizontalen Achse verschoben haben. In diesem Zusammenhang hat sich auch die Zuordnung der erwarteten Renditen verändert.</p>
<p>Portfoliogewichte auf Grundlage des BS Schätzers der erwarteten Renditen:</p>
<div id="cell-67" class="cell" data-execution_count="36">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1"></a>fig5 <span class="op">=</span> plt.figure(num<span class="op">=</span><span class="dv">2</span>, facecolor<span class="op">=</span><span class="st">'w'</span>, figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">5</span>))</span>
<span id="cb38-2"><a href="#cb38-2"></a>plt.stackplot(V_Target_bs, V_Weight_bs.T<span class="op">*</span><span class="dv">100</span>)</span>
<span id="cb38-3"><a href="#cb38-3"></a>plt.axis([min_bs, max_bs, <span class="fl">0.0</span>, <span class="fl">100.0</span>])</span>
<span id="cb38-4"><a href="#cb38-4"></a>plt.legend(<span class="bu">list</span>(frame.columns),</span>
<span id="cb38-5"><a href="#cb38-5"></a>           loc<span class="op">=</span><span class="st">'upper left'</span>, bbox_to_anchor<span class="op">=</span>(<span class="fl">1.0</span>, <span class="fl">1.0</span>), frameon<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb38-6"><a href="#cb38-6"></a>plt.xlabel(<span class="st">'Target expected return'</span>) </span>
<span id="cb38-7"><a href="#cb38-7"></a>plt.title(<span class="st">'Portfolioweights based on BS mean return estimates'</span>)</span>
<span id="cb38-8"><a href="#cb38-8"></a>plt.ylabel(<span class="st">'Allocation weight (%)'</span>)</span>
<span id="cb38-9"><a href="#cb38-9"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="kapitel4a_files/figure-html/cell-34-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="ledoit-wolf-versus-historisch-geschätzte-varianz-kovarianzmatrix" class="level4" data-number="5.5.5.4">
<h4 data-number="5.5.5.4" class="anchored" data-anchor-id="ledoit-wolf-versus-historisch-geschätzte-varianz-kovarianzmatrix"><span class="header-section-number">5.5.5.4</span> Ledoit-Wolf versus historisch geschätzte Varianz-Kovarianzmatrix</h4>
<p>Berechnung der Gewichte des Minimum Varianz Portfolios auf Basis der Ledoit-Wolf Schätzung der Varianz-Kovarianzmatrix.</p>
<div id="cell-69" class="cell" data-execution_count="37">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1"></a>bnd<span class="op">=</span>[(<span class="dv">0</span>, <span class="dv">1</span>),(<span class="dv">0</span>, <span class="dv">1</span>),(<span class="dv">0</span>, <span class="dv">1</span>),(<span class="dv">0</span>, <span class="dv">1</span>),(<span class="dv">0</span>, <span class="dv">1</span>),</span>
<span id="cb39-2"><a href="#cb39-2"></a>     (<span class="dv">0</span>, <span class="dv">1</span>),(<span class="dv">0</span>, <span class="dv">1</span>),(<span class="dv">0</span>, <span class="dv">1</span>),(<span class="dv">0</span>, <span class="dv">1</span>),(<span class="dv">0</span>, <span class="dv">1</span>)] <span class="co"># only positive weights</span></span>
<span id="cb39-3"><a href="#cb39-3"></a>cons <span class="op">=</span> ({<span class="st">'type'</span>: <span class="st">'eq'</span>, <span class="st">'fun'</span>: <span class="kw">lambda</span> x:  np.<span class="bu">sum</span>(x)<span class="op">-</span><span class="fl">1.0</span>})</span>
<span id="cb39-4"><a href="#cb39-4"></a></span>
<span id="cb39-5"><a href="#cb39-5"></a>res2<span class="op">=</span> minimize(calculate_portfolio_var, Weight_1N, args<span class="op">=</span>lw_Sigma, </span>
<span id="cb39-6"><a href="#cb39-6"></a>               bounds <span class="op">=</span> bnd, method<span class="op">=</span><span class="st">'SLSQP'</span>,constraints<span class="op">=</span>cons,tol<span class="op">=</span><span class="fl">1e-10</span>, </span>
<span id="cb39-7"><a href="#cb39-7"></a>               options<span class="op">=</span>{<span class="st">'disp'</span>: <span class="va">True</span>})</span>
<span id="cb39-8"><a href="#cb39-8"></a>Weight_MV2_lw <span class="op">=</span> res2.x</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Optimization terminated successfully    (Exit mode 0)
            Current function value: 0.014806352991309255
            Iterations: 22
            Function evaluations: 242
            Gradient evaluations: 22</code></pre>
</div>
</div>
<p>Ermittlung des Intervalls der Zielrenditen (unter Verwendung der historischen Mittelwerte als Schätzer für <span class="math inline">\(\mu\)</span>).</p>
<div id="cell-71" class="cell" data-execution_count="38">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1"></a><span class="co"># calculation of min and max target return</span></span>
<span id="cb41-2"><a href="#cb41-2"></a><span class="co"># min: expected return of MVP, max: expected return of MRP</span></span>
<span id="cb41-3"><a href="#cb41-3"></a></span>
<span id="cb41-4"><a href="#cb41-4"></a>min_lw <span class="op">=</span> calculate_portfolio_ret(Weight_MV2_lw, means)</span>
<span id="cb41-5"><a href="#cb41-5"></a>max_lw <span class="op">=</span> calculate_portfolio_ret(Weight_MRP, means) <span class="co"># no change here!</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>Berechnung der Effizienzkurve.</p>
<div id="cell-73" class="cell" data-execution_count="39">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1"></a>V_Target_lw <span class="op">=</span> np.linspace(min_lw, max_lw, num<span class="op">=</span><span class="dv">45</span>)</span>
<span id="cb42-2"><a href="#cb42-2"></a>V_Risk_lw <span class="op">=</span> np.zeros(V_Target.shape)</span>
<span id="cb42-3"><a href="#cb42-3"></a>V_Return_lw <span class="op">=</span> np.zeros(V_Target.shape)</span>
<span id="cb42-4"><a href="#cb42-4"></a>V_Weight_lw <span class="op">=</span> np.zeros((V_Target.shape[<span class="dv">0</span>], means.shape[<span class="dv">0</span>]))</span>
<span id="cb42-5"><a href="#cb42-5"></a><span class="cf">for</span> idx, Target_Return <span class="kw">in</span> <span class="bu">enumerate</span>(V_Target_lw):</span>
<span id="cb42-6"><a href="#cb42-6"></a>    cons <span class="op">=</span> ({<span class="st">'type'</span>: <span class="st">'eq'</span>, <span class="st">'fun'</span>: <span class="kw">lambda</span> x:  np.<span class="bu">sum</span>(x)<span class="op">-</span><span class="fl">1.0</span>},</span>
<span id="cb42-7"><a href="#cb42-7"></a>            {<span class="st">'type'</span>: <span class="st">'eq'</span>, <span class="st">'fun'</span>: <span class="kw">lambda</span> x:  calculate_portfolio_ret(x,means)<span class="op">-</span>Target_Return})</span>
<span id="cb42-8"><a href="#cb42-8"></a>    res<span class="op">=</span> minimize(calculate_portfolio_var, Weight_1N, args<span class="op">=</span>lw_Sigma, </span>
<span id="cb42-9"><a href="#cb42-9"></a>               bounds <span class="op">=</span> bnd, method<span class="op">=</span><span class="st">'SLSQP'</span>,constraints<span class="op">=</span>cons,tol<span class="op">=</span><span class="fl">1e-10</span>)</span>
<span id="cb42-10"><a href="#cb42-10"></a>    V_Weight_lw[idx, :] <span class="op">=</span> res.x.T</span>
<span id="cb42-11"><a href="#cb42-11"></a>    V_Return_lw[idx] <span class="op">=</span> calculate_portfolio_ret(res.x,means)</span>
<span id="cb42-12"><a href="#cb42-12"></a>    V_Risk_lw[idx] <span class="op">=</span> np.sqrt(calculate_portfolio_var(res.x, lw_Sigma))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>Graphische Darstellung der Effizienzkurve auf Basis der Ledoit-Wolf Varianz-Kovarianzmatrix und der historisch geschätzten.</p>
<div id="cell-75" class="cell" data-execution_count="40">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1"></a>fig6 <span class="op">=</span> plt.figure(num<span class="op">=</span><span class="dv">1</span>, facecolor<span class="op">=</span><span class="st">'w'</span>, figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">5</span>))</span>
<span id="cb43-2"><a href="#cb43-2"></a>ax <span class="op">=</span> fig6.add_subplot(<span class="dv">111</span>)</span>
<span id="cb43-3"><a href="#cb43-3"></a>plt.plot(V_Risk, V_Target, <span class="st">'g:'</span>, label<span class="op">=</span><span class="st">'Hist.-efficient frontier without short selling'</span>)</span>
<span id="cb43-4"><a href="#cb43-4"></a>plt.plot(V_Risk_lw, V_Target_lw, <span class="st">'g-'</span>, label<span class="op">=</span><span class="st">'LW-efficient frontier without short selling'</span>)</span>
<span id="cb43-5"><a href="#cb43-5"></a>plt.plot(np.sqrt(np.diagonal(Sigma)), means, <span class="st">'rx'</span>, label<span class="op">=</span><span class="st">'Asset'</span>)</span>
<span id="cb43-6"><a href="#cb43-6"></a><span class="cf">for</span> i, txt <span class="kw">in</span> <span class="bu">enumerate</span>(frame.columns):</span>
<span id="cb43-7"><a href="#cb43-7"></a>   ax.annotate(txt, (np.sqrt(np.diagonal(Sigma))[i],means[i]))</span>
<span id="cb43-8"><a href="#cb43-8"></a>plt.legend(loc<span class="op">=</span><span class="st">'best'</span>,  frameon<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb43-9"><a href="#cb43-9"></a>plt.xlabel(<span class="st">'Standard deviation'</span>)</span>
<span id="cb43-10"><a href="#cb43-10"></a>plt.ylabel(<span class="st">'Expected return'</span>)</span>
<span id="cb43-11"><a href="#cb43-11"></a>plt.title(<span class="st">'Comparison of efficient frontiers'</span>)</span>
<span id="cb43-12"><a href="#cb43-12"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="kapitel4a_files/figure-html/cell-38-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Portfoliogewichte auf Grundlage des Ledoit-Wolf Schätzers der erwarteten Varianz-Kovarianzmatrix:</p>
<div id="cell-77" class="cell" data-execution_count="41">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1"></a>fig7 <span class="op">=</span> plt.figure(num<span class="op">=</span><span class="dv">2</span>, facecolor<span class="op">=</span><span class="st">'w'</span>, figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">5</span>))</span>
<span id="cb44-2"><a href="#cb44-2"></a>plt.stackplot(V_Target_lw, V_Weight_lw.T<span class="op">*</span><span class="dv">100</span>)</span>
<span id="cb44-3"><a href="#cb44-3"></a>plt.axis([min_lw, max_lw, <span class="fl">0.0</span>, <span class="fl">100.0</span>])</span>
<span id="cb44-4"><a href="#cb44-4"></a>plt.legend(<span class="bu">list</span>(frame.columns),</span>
<span id="cb44-5"><a href="#cb44-5"></a>           loc<span class="op">=</span><span class="st">'upper left'</span>, bbox_to_anchor<span class="op">=</span>(<span class="fl">1.0</span>, <span class="fl">1.0</span>), frameon<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb44-6"><a href="#cb44-6"></a>plt.xlabel(<span class="st">'Target expected return'</span>) </span>
<span id="cb44-7"><a href="#cb44-7"></a>plt.title(<span class="st">'Portfolioweights based on LW covariance estimates'</span>)</span>
<span id="cb44-8"><a href="#cb44-8"></a>plt.ylabel(<span class="st">'Allocation weight (%)'</span>)</span>
<span id="cb44-9"><a href="#cb44-9"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="kapitel4a_files/figure-html/cell-39-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="lernvideos" class="level2" data-number="5.6">
<h2 data-number="5.6" class="anchored" data-anchor-id="lernvideos"><span class="header-section-number">5.6</span> Lernvideos</h2>
<section id="video-teil-1" class="level3" data-number="5.6.1">
<h3 data-number="5.6.1" class="anchored" data-anchor-id="video-teil-1"><span class="header-section-number">5.6.1</span> Video Teil 1</h3>
<p><a href="https://www.youtube.com/watch?v=zsTljPqi3Os"><img src="https://img.youtube.com/vi/zsTljPqi3Os/0.jpg" class="img-fluid"></a></p>
</section>
<section id="video-teil-2" class="level3" data-number="5.6.2">
<h3 data-number="5.6.2" class="anchored" data-anchor-id="video-teil-2"><span class="header-section-number">5.6.2</span> Video Teil 2</h3>
<p><a href="https://www.youtube.com/watch?v=-B2Id57otbY"><img src="https://img.youtube.com/vi/-B2Id57otbY/0.jpg" class="img-fluid"></a></p>
</section>
</section>
<section id="literatur" class="level2" data-number="5.7">
<h2 data-number="5.7" class="anchored" data-anchor-id="literatur"><span class="header-section-number">5.7</span> Literatur</h2>
<p>Franzen, D., Schäfer, K. (2018). Assetmanagement. Schäffer-Poeschel, Stuttgart.</p>
<p>James, W., Stein, C. (1961). Estimation with quadratic loss. In Proceedings of the fourth Berkeley symposium on mathematical statistics and probability.</p>
<p>Jorion, P. (1985). International portfolio diversification with estimation risk. Journal of Business 58, S. 259-278.</p>
<p>Jorion, P. (1986). Bayes-Stein estimation for portfolio analysis. Journal of Financial and Quantitative Analysis 21, S. 279-292.</p>
<p>Ledoit, O., Wolf, M. (2003). Improved estimation of the covariance matrix of stock returns with an application to portfolio selection. Journal of Empirical Finance 10, S. 603-621.</p>
<p>Sharpe, W. (1963). A simplified model for portfolio analysis. Management Science 9, S. 277-293.</p>
<p>Zellner, A., Chetty, V. K. (1965). Prediction and decision problems in regression models from the Bayesian point of view. Journal of the American Statistical Association 60, S. 608-616.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./kapitel3a.html" class="pagination-link" aria-label="Schätzrisiken in der Portfoliotheorie">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Schätzrisiken in der Portfoliotheorie</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./kapitel5a.html" class="pagination-link" aria-label="Das Black-Litterman Modell">
        <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Das Black-Litterman Modell</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<script src="site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>